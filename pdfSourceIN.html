<html><head><meta charset="UTF-8"><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-dockerfile.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-javascript.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-none.min.js"></script><style>
        .article {
            position: relative;
            padding-bottom: 24px;
        }
        

        .bordered-element {
            border: 1px solid #c4c4c4;
            overflow: hidden;
        }
        

        .bordered-element-rounded {
            border: 1px solid #c4c4c4;
            border-radius: 7px;
            overflow: hidden;
        }
        

        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        

        .center-text {
            text-align: center;
        }
        

        .code-block {
            overflow: hidden;
            position: relative;
            padding: 0;
            border-radius: 8px;
            font-variant-ligatures: none;
            background-color: rgba(25, 25, 28, .05);
            word-break: break-all;
        }
        

        .container {
            max-width: 100%;
            overflow: hidden;
            page-break-inside: avoid;
            display: block;
        }
        

        .control {
            color: #19191c;
            font-size: 16px;
            font-weight: 670;
        }
        

        .detached {
            margin-block-start: 0;
            margin-block-end: 0;
            margin-bottom: 8px;
        }
        

        .emphasis {
            color: inherit;
            font-weight: inherit;
            font-style: italic;
        }
        

        .flex {
            display: flex;
        }
        

        .image {
            max-width: 100%;
            max-height: 90vh;
            width: auto;
        }
        

        .image-container {
            max-width: 100vw;
        }
        

        .image-size {
            height: auto;
        }
        

        .inline-code {
            border-radius: 4px;
            display: inline;
            padding: 2px 1px;
            font-family: JetBrains Sans,monospace;
            background: #e6e6e6;
        }
        

        .inline-icon {
            vertical-align: middle;
        }
        

        .list {
            list-style-type: disc;
            padding-left: 0;
            margin-left: 15px;
        }
        

        .list-decimal {
            list-style-type: decimal;
        }
        

        .list-item {
            margin-top: 6px;
            margin-bottom: 6px;
            margin-left: 4px;
        }
        

        .main-title {
            padding-bottom: 24px;
            margin-top: 0;
            font-size: 40px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        

        .mermaid {
            page-break-inside: avoid;
        }
        
        /* Light theme */
/** Common */
#mermaid .label, #mermaid {font-family:"trebuchet ms",arial,sans-serif; font-size:16px;fill:#333;}#mermaid .error-icon{fill:#552222;}#mermaid .error-text{fill:#552222;stroke:#552222;}#mermaid .edge-thickness-normal{stroke-width:2px;}#mermaid .edge-thickness-thick{stroke-width:3.5px;}#mermaid .edge-pattern-solid{stroke-dasharray:0;}#mermaid .edge-pattern-dashed{stroke-dasharray:3;}#mermaid .edge-pattern-dotted{stroke-dasharray:2;}#mermaid .marker{fill:#333333;stroke:#333333;}#mermaid .marker.cross{stroke:#333333;} #mermaid {max-width: 100%;}
/** Flowchart */
#mermaid .cluster-label text{fill:#333;}#mermaid .cluster-label span{color:#333;}#mermaid .label text,#mermaid span{fill:#333;color:#333;}#mermaid .node rect,#mermaid .node circle,#mermaid .node ellipse,#mermaid .node polygon,#mermaid .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid .node .label{text-align:center;}#mermaid .node.clickable{cursor:pointer;}#mermaid .arrowheadPath{fill:#333333;}#mermaid .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid .flowchart-link{stroke:#333333;fill:none;}#mermaid .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid .cluster text{fill:#333;}#mermaid .cluster span{color:#333;}#mermaid div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}
/** Sequence diagram */
#mermaid .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid text.actor>tspan{fill:black;stroke:none;}#mermaid .actor-line{stroke:grey;}#mermaid .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid #arrowhead path{fill:#333;stroke:#333;}#mermaid .sequenceNumber{fill:white;}#mermaid #sequencenumber{fill:#333;}#mermaid #crosshead path{fill:#333;stroke:#333;}#mermaid .messageText{fill:#333;stroke:none;}#mermaid .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid .labelText,#mermaid .labelText>tspan{fill:black;stroke:none;}#mermaid .loopText,#mermaid .loopText>tspan{fill:black;stroke:none;}#mermaid .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid .noteText,#mermaid .noteText>tspan{fill:black;stroke:none;}#mermaid .activation0{fill:#f4f4f4;stroke:#666;}#mermaid .activation1{fill:#f4f4f4;stroke:#666;}#mermaid .activation2{fill:#f4f4f4;stroke:#666;}#mermaid .actorPopupMenu{position:absolute;}#mermaid .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid .actor-man circle,#mermaid line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}
/** Gantt */
#mermaid .exclude-range{fill:#eeeeee;}#mermaid .section{stroke:none;opacity:0.2;}#mermaid .section0{fill:rgba(102, 102, 255, 0.49);}#mermaid .section2{fill:#fff400;}#mermaid .section1,#mermaid .section3{fill:white;opacity:0.2;}#mermaid .sectionTitle0{fill:#333;}#mermaid .sectionTitle1{fill:#333;}#mermaid .sectionTitle2{fill:#333;}#mermaid .sectionTitle3{fill:#333;}#mermaid .sectionTitle{text-anchor:start;}#mermaid .grid .tick{stroke:lightgrey;opacity:0.8;shape-rendering:crispEdges;}#mermaid .grid .tick text{fill:#333;}#mermaid .grid path{stroke-width:0;}#mermaid .today{fill:none;stroke:red;stroke-width:2px;}#mermaid .task{stroke-width:2;}#mermaid .taskText{text-anchor:middle;}#mermaid .taskTextOutsideRight{fill:black;text-anchor:start;}#mermaid .taskTextOutsideLeft{fill:black;text-anchor:end;}#mermaid .task.clickable{cursor:pointer;}#mermaid .taskText.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid .taskText0,#mermaid .taskText1,#mermaid .taskText2,#mermaid .taskText3{fill:white;}#mermaid .task0,#mermaid .task1,#mermaid .task2,#mermaid .task3{fill:#8a90dd;stroke:#534fbc;}#mermaid .taskTextOutside0,#mermaid .taskTextOutside2{fill:black;}#mermaid .taskTextOutside1,#mermaid .taskTextOutside3{fill:black;}#mermaid .active0,#mermaid .active1,#mermaid .active2,#mermaid .active3{fill:#bfc7ff;stroke:#534fbc;}#mermaid .activeText0,#mermaid .activeText1,#mermaid .activeText2,#mermaid .activeText3{fill:black!important;}#mermaid .done0,#mermaid .done1,#mermaid .done2,#mermaid .done3{stroke:grey;fill:lightgrey;stroke-width:2;}#mermaid .doneText0,#mermaid .doneText1,#mermaid .doneText2,#mermaid .doneText3{fill:black!important;}#mermaid .crit0,#mermaid .crit1,#mermaid .crit2,#mermaid .crit3{stroke:#ff8888;fill:red;stroke-width:2;}#mermaid .activeCrit0,#mermaid .activeCrit1,#mermaid .activeCrit2,#mermaid .activeCrit3{stroke:#ff8888;fill:#bfc7ff;stroke-width:2;}#mermaid .doneCrit0,#mermaid .doneCrit1,#mermaid .doneCrit2,#mermaid .doneCrit3{stroke:#ff8888;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges;}#mermaid .milestone{transform:rotate(45deg) scale(0.8,0.8);}#mermaid .milestoneText{font-style:italic;}#mermaid .doneCritText0,#mermaid .doneCritText1,#mermaid .doneCritText2,#mermaid .doneCritText3{fill:black!important;}#mermaid .activeCritText0,#mermaid .activeCritText1,#mermaid .activeCritText2,#mermaid .activeCritText3{fill:black!important;}#mermaid .titleText{text-anchor:middle;font-size:18px;fill:#333;}
/** Class diagram */
#mermaid g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-size:10px;}#mermaid g.classGroup text .title{font-weight:bolder;}#mermaid .nodeLabel,#mermaid .edgeLabel{color:#131300;}#mermaid .edgeLabel .label rect{fill:#ECECFF;}#mermaid .label text{fill:#131300;}#mermaid .edgeLabel .label span{background:#ECECFF;}#mermaid .classTitle{font-weight:bolder;}#mermaid .node rect,#mermaid .node circle,#mermaid .node ellipse,#mermaid .node polygon,#mermaid .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid .divider{stroke:#9370DB;stroke:1;}#mermaid g.clickable{cursor:pointer;}#mermaid g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid .dashed-line{stroke-dasharray:3;}#mermaid #compositionStart,#mermaid .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid #compositionEnd,#mermaid .composition{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid #dependencyStart,#mermaid .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid #dependencyStart,#mermaid .dependency{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid #extensionStart,#mermaid .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid #extensionEnd,#mermaid .extension{fill:#333333!important;stroke:#333333!important;stroke-width:1;}#mermaid #aggregationStart,#mermaid .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid #aggregationEnd,#mermaid .aggregation{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid #lollipopStart,#mermaid .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid #lollipopEnd,#mermaid .lollipop{fill:#ECECFF!important;stroke:#333333!important;stroke-width:1;}#mermaid .edgeTerminals{font-size:11px;}
/** Git graph */
#mermaid .commit-id,#mermaid .commit-msg{fill:lightgrey;}#mermaid .commit0{stroke:hsl(240, 100%, 46.2745098039%);fill:hsl(240, 100%, 46.2745098039%);}#mermaid .commit-highlight0{stroke:hsl(60, 100%, 3.7254901961%);fill:hsl(60, 100%, 3.7254901961%);}#mermaid .label0{fill:hsl(240, 100%, 46.2745098039%);}#mermaid .arrow0{stroke:hsl(240, 100%, 46.2745098039%);}#mermaid .branch-label1{fill:black;}#mermaid .commit1{stroke:hsl(60, 100%, 43.5294117647%);fill:hsl(60, 100%, 43.5294117647%);}#mermaid .commit-highlight1{stroke:rgb(0, 0, 160.5);fill:rgb(0, 0, 160.5);}#mermaid .label1{fill:hsl(60, 100%, 43.5294117647%);}#mermaid .arrow1{stroke:hsl(60, 100%, 43.5294117647%);}#mermaid .branch-label2{fill:black;}#mermaid .commit2{stroke:hsl(80, 100%, 46.2745098039%);fill:hsl(80, 100%, 46.2745098039%);}#mermaid .commit-highlight2{stroke:rgb(48.8333333334, 0, 146.5000000001);fill:rgb(48.8333333334, 0, 146.5000000001);}#mermaid .label2{fill:hsl(80, 100%, 46.2745098039%);}#mermaid .arrow2{stroke:hsl(80, 100%, 46.2745098039%);}#mermaid .branch-label3{fill:#ffffff;}#mermaid .commit3{stroke:hsl(210, 100%, 46.2745098039%);fill:hsl(210, 100%, 46.2745098039%);}#mermaid .commit-highlight3{stroke:rgb(146.5000000001, 73.2500000001, 0);fill:rgb(146.5000000001, 73.2500000001, 0);}#mermaid .label3{fill:hsl(210, 100%, 46.2745098039%);}#mermaid .arrow3{stroke:hsl(210, 100%, 46.2745098039%);}#mermaid .branch-label4{fill:black;}#mermaid .commit4{stroke:hsl(180, 100%, 46.2745098039%);fill:hsl(180, 100%, 46.2745098039%);}#mermaid .commit-highlight4{stroke:rgb(146.5000000001, 0, 0);fill:rgb(146.5000000001, 0, 0);}#mermaid .label4{fill:hsl(180, 100%, 46.2745098039%);}#mermaid .arrow4{stroke:hsl(180, 100%, 46.2745098039%);}#mermaid .branch-label5{fill:black;}#mermaid .commit5{stroke:hsl(150, 100%, 46.2745098039%);fill:hsl(150, 100%, 46.2745098039%);}#mermaid .commit-highlight5{stroke:rgb(146.5000000001, 0, 73.2500000001);fill:rgb(146.5000000001, 0, 73.2500000001);}#mermaid .label5{fill:hsl(150, 100%, 46.2745098039%);}#mermaid .arrow5{stroke:hsl(150, 100%, 46.2745098039%);}#mermaid .branch-label6{fill:black;}#mermaid .commit6{stroke:hsl(300, 100%, 46.2745098039%);fill:hsl(300, 100%, 46.2745098039%);}#mermaid .commit-highlight6{stroke:rgb(0, 146.5000000001, 0);fill:rgb(0, 146.5000000001, 0);}#mermaid .label6{fill:hsl(300, 100%, 46.2745098039%);}#mermaid .arrow6{stroke:hsl(300, 100%, 46.2745098039%);}#mermaid .branch-label7{fill:black;}#mermaid .commit7{stroke:hsl(0, 100%, 46.2745098039%);fill:hsl(0, 100%, 46.2745098039%);}#mermaid .commit-highlight7{stroke:rgb(0, 146.5000000001, 146.5000000001);fill:rgb(0, 146.5000000001, 146.5000000001);}#mermaid .label7{fill:hsl(0, 100%, 46.2745098039%);}#mermaid .arrow7{stroke:hsl(0, 100%, 46.2745098039%);}#mermaid .branch{stroke-width:1;stroke:#333333;stroke-dasharray:2;}#mermaid .commit-label{font-size:10px;fill:#000021;}#mermaid .commit-label-bkg{font-size:10px;fill:#ffffde;opacity:0.5;}#mermaid .tag-label{font-size:10px;fill:#131300;}#mermaid .tag-label-bkg{fill:#ECECFF;stroke:hsl(240, 60%, 86.2745098039%);}#mermaid .tag-hole{fill:#333;}#mermaid .commit-merge{stroke:#ECECFF;fill:#ECECFF;}#mermaid .commit-reverse{stroke:#ECECFF;fill:#ECECFF;stroke-width:3;}#mermaid .commit-highlight-inner{stroke:#ECECFF;fill:#ECECFF;}#mermaid .arrow{stroke-width:8;stroke-linecap:round;fill:none;}
#mermaid .branchLabel .label {font-size:16px;} #mermaid g.label.branch-label0 text, #mermaid g.label.branch-label3 text { fill: #eee; }
/** Entity relationship */
#mermaid .entityBox{fill:#ECECFF;stroke:#9370DB;}#mermaid .attributeBoxOdd{fill:#ffffff;stroke:#9370DB;}#mermaid .attributeBoxEven{fill:#f2f2f2;stroke:#9370DB;}#mermaid .relationshipLabelBox{fill:hsl(80, 100%, 96.2745098039%);opacity:0.7;background-color:hsl(80, 100%, 96.2745098039%);}#mermaid .relationshipLabelBox rect{opacity:0.5;}#mermaid .relationshipLine{stroke:#333333;}
/** Journey */
#mermaid .label{color:#333;}#mermaid .mouth{stroke:#666;}#mermaid line{stroke:#333;}#mermaid .legend{fill:#333;}#mermaid .label text{fill:#333;}#mermaid .label{color:#333;}#mermaid .face{fill:#FFF8DC;stroke:#999;}#mermaid .node rect,#mermaid .node circle,#mermaid .node ellipse,#mermaid .node polygon,#mermaid .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid .node .label{text-align:center;}#mermaid .node.clickable{cursor:pointer;}#mermaid .arrowheadPath{fill:#333333;}#mermaid .edgePath .path{stroke:#333333;stroke-width:1.5px;}#mermaid .flowchart-link{stroke:#333333;fill:none;}#mermaid .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid .edgeLabel rect{opacity:0.5;}#mermaid .cluster text{fill:#333;}#mermaid div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid .task-type-0,#mermaid .section-type-0{fill:#ECECFF;}#mermaid .task-type-1,#mermaid .section-type-1{fill:#ffffde;}#mermaid .task-type-2,#mermaid .section-type-2{fill:hsl(304, 100%, 96.2745098039%);}#mermaid .task-type-3,#mermaid .section-type-3{fill:hsl(124, 100%, 93.5294117647%);}#mermaid .task-type-4,#mermaid .section-type-4{fill:hsl(176, 100%, 96.2745098039%);}#mermaid .task-type-5,#mermaid .section-type-5{fill:hsl(-4, 100%, 93.5294117647%);}#mermaid .task-type-6,#mermaid .section-type-6{fill:hsl(8, 100%, 96.2745098039%);}#mermaid .task-type-7,#mermaid .section-type-7{fill:hsl(188, 100%, 93.5294117647%);}
/** State diagram */
#mermaid defs #statediagram-barbEnd{fill:#333333;stroke:#333333;}#mermaid g.stateGroup text{fill:#9370DB;stroke:none;font-size:10px;}#mermaid g.stateGroup text{fill:#333;stroke:none;font-size:10px;}#mermaid g.stateGroup .state-title{font-weight:bolder;fill:#131300;}#mermaid g.stateGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid g.stateGroup line{stroke:#333333;stroke-width:1;}#mermaid .transition{stroke:#333333;stroke-width:1;fill:none;}#mermaid .stateGroup .composit{fill:white;border-bottom:1px;}#mermaid .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#mermaid .state-note{stroke:#aaaa33;fill:#fff5ad;}#mermaid .state-note text{fill:black;stroke:none;font-size:10px;}#mermaid .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid .edgeLabel .label rect{fill:#ECECFF;opacity:0.5;}#mermaid .edgeLabel .label text{fill:#333;}#mermaid .label div .edgeLabel{color:#333;}#mermaid .stateLabel text{fill:#131300;font-size:10px;font-weight:bold;}#mermaid .node circle.state-start{fill:#333333;stroke:#333333;}#mermaid .node .fork-join{fill:#333333;stroke:#333333;}#mermaid .node circle.state-end{fill:#9370DB;stroke:white;stroke-width:1.5;}#mermaid .end-state-inner{fill:white;stroke-width:1.5;}#mermaid .node rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid .node polygon{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid #statediagram-barbEnd{fill:#333333;}#mermaid .statediagram-cluster rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid .cluster-label,#mermaid .nodeLabel{color:#131300;}#mermaid .statediagram-cluster rect.outer{rx:5px;ry:5px;}#mermaid .statediagram-state .divider{stroke:#9370DB;}#mermaid .statediagram-state .title-state{rx:5px;ry:5px;}#mermaid .statediagram-cluster.statediagram-cluster .inner{fill:white;}#mermaid .statediagram-cluster.statediagram-cluster-alt .inner{fill:#f0f0f0;}#mermaid .statediagram-cluster .inner{rx:0;ry:0;}#mermaid .statediagram-state rect.basic{rx:5px;ry:5px;}#mermaid .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#f0f0f0;}#mermaid .note-edge{stroke-dasharray:5;}#mermaid .statediagram-note rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#mermaid .statediagram-note rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#mermaid .statediagram-note text{fill:black;}#mermaid .statediagram-note .nodeLabel{color:black;}#mermaid .statediagram .edgeLabel{color:red;}#mermaid #dependencyStart,#mermaid #dependencyEnd{fill:#333333;stroke:#333333;stroke-width:1;}
/** Pie chart */
#mermaid .pieCircle{stroke:#222;stroke-width:1px;}#mermaid .pieTitleText{text-anchor:middle;font-size:25px;fill:black;}#mermaid .slice{fill:#333;font-size:17px;}#mermaid .legend text{fill:black;font-size:17px;}
/** Requirements */
#mermaid marker{fill:#333333;stroke:#333333;}#mermaid marker.cross{stroke:#333333;}#mermaid svg{font-size:16px;}#mermaid .reqBox{fill:#ECECFF;fill-opacity:100%;stroke:hsl(240, 60%, 86.2745098039%);stroke-width:hsl(240, 60%, 86.2745098039%);}#mermaid .reqTitle,#mermaid .reqLabel{fill:#131300;}#mermaid .reqLabelBox{fill:#e8e8e8;fill-opacity:100%;}#mermaid .req-title-line{stroke:hsl(240, 60%, 86.2745098039%);stroke-width:hsl(240, 60%, 86.2745098039%);}#mermaid .relationshipLine{stroke:#333333;stroke-width:1;}#mermaid .relationshipLabel{fill:black;}
/** C4 system */
#mermaid .person{stroke:calculated;fill:calculated;}
/** Mind map */
#mermaid .section-root.mindmap-node { fill: hsl(240, 100%, 50%); } #mermaid .section-root.mindmap-node text { fill: white; }
#mermaid .mindmap-edges .edge-depth-0 { stroke-width: 14; }
#mermaid .mindmap-edges .edge-depth-1 { stroke-width: 11; }
#mermaid .mindmap-edges .edge-depth-2 { stroke-width: 8; }
#mermaid .mindmap-edges .edge-depth-3 { stroke-width: 5; }
#mermaid .mindmap-edges .edge-depth-4 { stroke-width: 3; }
#mermaid .mindmap-edges .edge-depth-5 { stroke-width: 2; }
#mermaid .mindmap-edges .edge-depth-6 { stroke-width: 1; }
#mermaid .mindmap-edges .section-edge-0,  #mermaid .mindmap-node.section-0  path { fill: hsl(60, 100%, 70%); stroke: hsl(60, 100%, 70%); } #mermaid .mindmap-node.section-0  text { fill: black; }
#mermaid .mindmap-edges .section-edge-1,  #mermaid .mindmap-node.section-1  path { fill: hsl(170, 90%, 70%); stroke: hsl(170, 90%, 70%); } #mermaid .mindmap-node.section-1  text { fill: black; }
#mermaid .mindmap-edges .section-edge-2,  #mermaid .mindmap-node.section-2  path { fill: hsl(280, 90%, 70%); stroke: hsl(280, 90%, 70%); } #mermaid .mindmap-node.section-2  text { fill: white; }
#mermaid .mindmap-edges .section-edge-3,  #mermaid .mindmap-node.section-3  path { fill: hsl(30, 90%, 70%);  stroke: hsl(30, 90%, 70%);  } #mermaid .mindmap-node.section-3  text { fill: black; }
#mermaid .mindmap-edges .section-edge-4,  #mermaid .mindmap-node.section-4  path { fill: hsl(140, 90%, 70%); stroke: hsl(140, 90%, 70%); } #mermaid .mindmap-node.section-4  text { fill: black; }
#mermaid .mindmap-edges .section-edge-5,  #mermaid .mindmap-node.section-5  path { fill: hsl(250, 90%, 70%); stroke: hsl(250, 90%, 70%); } #mermaid .mindmap-node.section-5  text { fill: white; }
#mermaid .mindmap-edges .section-edge-6,  #mermaid .mindmap-node.section-6  path { fill: hsl(0, 90%, 70%);   stroke: hsl(0, 90%, 70%);   } #mermaid .mindmap-node.section-6  text { fill: black; }
#mermaid .mindmap-edges .section-edge-7,  #mermaid .mindmap-node.section-7  path { fill: hsl(110, 90%, 70%); stroke: hsl(110, 90%, 70%); } #mermaid .mindmap-node.section-7  text { fill: black; }
#mermaid .mindmap-edges .section-edge-8,  #mermaid .mindmap-node.section-8  path { fill: hsl(220, 90%, 70%); stroke: hsl(220, 90%, 70%); } #mermaid .mindmap-node.section-8  text { fill: white; }
#mermaid .mindmap-edges .section-edge-9,  #mermaid .mindmap-node.section-9  path { fill: hsl(330, 90%, 70%); stroke: hsl(330, 90%, 70%); } #mermaid .mindmap-node.section-9  text { fill: black; }
#mermaid .mindmap-edges .section-edge-10, #mermaid .mindmap-node.section-10 path { fill: hsl(80, 90%, 70%);  stroke: hsl(80, 90%, 70%);  } #mermaid .mindmap-node.section-10 text { fill: black; }
#mermaid .mindmap-edges .section-edge-11, #mermaid .mindmap-node.section-11 path { fill: hsl(190, 90%, 70%); stroke: hsl(190, 90%, 70%); } #mermaid .mindmap-node.section-11 text { fill: black; }
#mermaid .mindmap-edges .section-edge-12, #mermaid .mindmap-node.section-12 path { fill: hsl(300, 90%, 70%); stroke: hsl(300, 90%, 70%); } #mermaid .mindmap-node.section-12 text { fill: black; }
/** Timeline */
#mermaid .timeline text tspan { fill: #222; } #mermaid .timeline-node path { fill: #ccc; }

/* Dark theme */
/** Common */
html.theme-dark #mermaid {fill:#ccc;}html.theme-dark #mermaid .error-icon{fill:#a44141;}html.theme-dark #mermaid .error-text{fill:#ddd;stroke:#ddd;}html.theme-dark #mermaid .edge-pattern-solid{stroke-dasharray:0;}html.theme-dark #mermaid .edge-pattern-dashed{stroke-dasharray:3;}html.theme-dark #mermaid .edge-pattern-dotted{stroke-dasharray:2;}html.theme-dark #mermaid .marker{fill:lightgrey;stroke:lightgrey;}html.theme-dark #mermaid .marker.cross{stroke:lightgrey;}
/** Flowchart */
html.theme-dark #mermaid .label{color:#ccc;}html.theme-dark #mermaid .cluster-label text{fill:#F9FFFE;}html.theme-dark #mermaid .cluster-label span{color:#F9FFFE;}html.theme-dark #mermaid .label text,html.theme-dark #mermaid span{fill:#ccc;color:#ccc;}html.theme-dark #mermaid .node rect,html.theme-dark #mermaid .node circle,html.theme-dark #mermaid .node ellipse,html.theme-dark #mermaid .node polygon,html.theme-dark #mermaid .node path{fill:#1f2020;stroke:#81B1DB;stroke-width:1px;}html.theme-dark #mermaid .node .label{text-align:center;}html.theme-dark #mermaid .node.clickable{cursor:pointer;}html.theme-dark #mermaid .arrowheadPath{fill:lightgrey;}html.theme-dark #mermaid .edgePath .path{stroke:lightgrey;stroke-width:2.0px;}html.theme-dark #mermaid .flowchart-link{stroke:lightgrey;fill:none;}html.theme-dark #mermaid .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}html.theme-dark #mermaid .edgeLabel rect{opacity:0.5;background-color:hsl(0, 0%, 34.4117647059%);fill:hsl(0, 0%, 34.4117647059%);}html.theme-dark #mermaid .cluster rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:rgba(255, 255, 255, 0.25);stroke-width:1px;}html.theme-dark #mermaid .cluster text{fill:#F9FFFE;}html.theme-dark #mermaid .cluster span{color:#F9FFFE;}html.theme-dark #mermaid div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}html.theme-dark #mermaid :root{--mermaid-}
/** Sequence diagram */
html.theme-dark #mermaid .actor{stroke:#81B1DB;fill:#1f2020;}html.theme-dark #mermaid text.actor>tspan{fill:lightgrey;stroke:none;}html.theme-dark #mermaid .actor-line{stroke:lightgrey;}html.theme-dark #mermaid .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:lightgrey;}html.theme-dark #mermaid .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:lightgrey;}html.theme-dark #mermaid #arrowhead path{fill:lightgrey;stroke:lightgrey;}html.theme-dark #mermaid .sequenceNumber{fill:black;}html.theme-dark #mermaid #sequencenumber{fill:lightgrey;}html.theme-dark #mermaid #crosshead path{fill:lightgrey;stroke:lightgrey;}html.theme-dark #mermaid .messageText{fill:lightgrey;stroke:none;}html.theme-dark #mermaid .labelBox{stroke:#81B1DB;fill:#1f2020;}html.theme-dark #mermaid .labelText,html.theme-dark #mermaid .labelText>tspan{fill:lightgrey;stroke:none;}html.theme-dark #mermaid .loopText,html.theme-dark #mermaid .loopText>tspan{fill:lightgrey;stroke:none;}html.theme-dark #mermaid .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:#81B1DB;fill:#81B1DB;}html.theme-dark #mermaid .note{stroke:hsl(180, 0%, 18.3529411765%);fill:hsl(180, 1.5873015873%, 28.3529411765%);}html.theme-dark #mermaid .noteText,html.theme-dark #mermaid .noteText>tspan{fill:rgb(183.8476190475, 181.5523809523, 181.5523809523);stroke:none;}html.theme-dark #mermaid .activation0{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:#81B1DB;}html.theme-dark #mermaid .activation1{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:#81B1DB;}html.theme-dark #mermaid .activation2{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:#81B1DB;}html.theme-dark #mermaid .actorPopupMenu{position:absolute;}html.theme-dark #mermaid .actorPopupMenuPanel{position:absolute;fill:#1f2020;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}html.theme-dark #mermaid .actor-man line{stroke:#81B1DB;fill:#1f2020;}html.theme-dark #mermaid .actor-man circle,html.theme-dark #mermaid line{stroke:#81B1DB;fill:#1f2020;stroke-width:2px;}html.theme-dark #mermaid :root{--mermaid-}
/** Gantt */
html.theme-dark #mermaid .exclude-range{fill:#444;}html.theme-dark #mermaid .section{stroke:none;opacity:0.2;}html.theme-dark #mermaid .section0{fill:hsl(52.9411764706, 28.813559322%, 58.431372549%);}html.theme-dark #mermaid .section2{fill:#EAE8D9;}html.theme-dark #mermaid .section1,html.theme-dark #mermaid .section3{fill:#333;opacity:0.2;}html.theme-dark #mermaid .sectionTitle0{fill:#F9FFFE;}html.theme-dark #mermaid .sectionTitle1{fill:#F9FFFE;}html.theme-dark #mermaid .sectionTitle2{fill:#F9FFFE;}html.theme-dark #mermaid .sectionTitle3{fill:#F9FFFE;}html.theme-dark #mermaid .sectionTitle{text-anchor:start;}html.theme-dark #mermaid .grid .tick{stroke:lightgrey;opacity:0.8;shape-rendering:crispEdges;}html.theme-dark #mermaid .grid .tick text{fill:#ccc;}html.theme-dark #mermaid .grid path{stroke-width:0;}html.theme-dark #mermaid .today{fill:none;stroke:#DB5757;stroke-width:2px;}html.theme-dark #mermaid .task{stroke-width:2;}html.theme-dark #mermaid .taskText{text-anchor:middle;}html.theme-dark #mermaid .taskTextOutsideRight{fill:hsl(28.5714285714, 17.3553719008%, 86.2745098039%);text-anchor:start;}html.theme-dark #mermaid .taskTextOutsideLeft{fill:hsl(28.5714285714, 17.3553719008%, 86.2745098039%);text-anchor:end;}html.theme-dark #mermaid .task.clickable{cursor:pointer;}html.theme-dark #mermaid .taskText.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}html.theme-dark #mermaid .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}html.theme-dark #mermaid .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}html.theme-dark #mermaid .taskText0,html.theme-dark #mermaid .taskText1,html.theme-dark #mermaid .taskText2,html.theme-dark #mermaid .taskText3{fill:hsl(28.5714285714, 17.3553719008%, 86.2745098039%);}html.theme-dark #mermaid .task0,html.theme-dark #mermaid .task1,html.theme-dark #mermaid .task2,html.theme-dark #mermaid .task3{fill:hsl(180, 1.5873015873%, 35.3529411765%);stroke:#ffffff;}html.theme-dark #mermaid .taskTextOutside0,html.theme-dark #mermaid .taskTextOutside2{fill:lightgrey;}html.theme-dark #mermaid .taskTextOutside1,html.theme-dark #mermaid .taskTextOutside3{fill:lightgrey;}html.theme-dark #mermaid .active0,html.theme-dark #mermaid .active1,html.theme-dark #mermaid .active2,html.theme-dark #mermaid .active3{fill:#81B1DB;stroke:#ffffff;}html.theme-dark #mermaid .activeText0,html.theme-dark #mermaid .activeText1,html.theme-dark #mermaid .activeText2,html.theme-dark #mermaid .activeText3{fill:hsl(28.5714285714, 17.3553719008%, 86.2745098039%)!important;}html.theme-dark #mermaid .done0,html.theme-dark #mermaid .done1,html.theme-dark #mermaid .done2,html.theme-dark #mermaid .done3{stroke:grey;fill:lightgrey;stroke-width:2;}html.theme-dark #mermaid .doneText0,html.theme-dark #mermaid .doneText1,html.theme-dark #mermaid .doneText2,html.theme-dark #mermaid .doneText3{fill:hsl(28.5714285714, 17.3553719008%, 86.2745098039%)!important;}html.theme-dark #mermaid .crit0,html.theme-dark #mermaid .crit1,html.theme-dark #mermaid .crit2,html.theme-dark #mermaid .crit3{stroke:#E83737;fill:#E83737;stroke-width:2;}html.theme-dark #mermaid .activeCrit0,html.theme-dark #mermaid .activeCrit1,html.theme-dark #mermaid .activeCrit2,html.theme-dark #mermaid .activeCrit3{stroke:#E83737;fill:#81B1DB;stroke-width:2;}html.theme-dark #mermaid .doneCrit0,html.theme-dark #mermaid .doneCrit1,html.theme-dark #mermaid .doneCrit2,html.theme-dark #mermaid .doneCrit3{stroke:#E83737;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges;}html.theme-dark #mermaid .milestone{transform:rotate(45deg) scale(0.8,0.8);}html.theme-dark #mermaid .milestoneText{font-style:italic;}html.theme-dark #mermaid .doneCritText0,html.theme-dark #mermaid .doneCritText1,html.theme-dark #mermaid .doneCritText2,html.theme-dark #mermaid .doneCritText3{fill:hsl(28.5714285714, 17.3553719008%, 86.2745098039%)!important;}html.theme-dark #mermaid .activeCritText0,html.theme-dark #mermaid .activeCritText1,html.theme-dark #mermaid .activeCritText2,html.theme-dark #mermaid .activeCritText3{fill:hsl(28.5714285714, 17.3553719008%, 86.2745098039%)!important;}html.theme-dark #mermaid .titleText{text-anchor:middle;fill:#ccc;}html.theme-dark #mermaid :root{--mermaid-}
/** Class diagram */
html.theme-dark #mermaid g.classGroup text{fill:#e0dfdf;stroke:none;}html.theme-dark #mermaid g.classGroup text .title{font-weight:bolder;}html.theme-dark #mermaid .nodeLabel,html.theme-dark #mermaid .edgeLabel{color:#e0dfdf;}html.theme-dark #mermaid .edgeLabel .label rect{fill:#1f2020;}html.theme-dark #mermaid .label text{fill:#e0dfdf;}html.theme-dark #mermaid .edgeLabel .label span{background:#1f2020;}html.theme-dark #mermaid .classTitle{font-weight:bolder;}html.theme-dark #mermaid .node rect,html.theme-dark #mermaid .node circle,html.theme-dark #mermaid .node ellipse,html.theme-dark #mermaid .node polygon,html.theme-dark #mermaid .node path{fill:#1f2020;stroke:#81B1DB;stroke-width:1px;}html.theme-dark #mermaid .divider{stroke:#81B1DB;stroke:1;}html.theme-dark #mermaid g.clickable{cursor:pointer;}html.theme-dark #mermaid g.classGroup rect{fill:#1f2020;stroke:#81B1DB;}html.theme-dark #mermaid g.classGroup line{stroke:#81B1DB;stroke-width:1;}html.theme-dark #mermaid .classLabel .box{stroke:none;stroke-width:0;fill:#1f2020;opacity:0.5;}html.theme-dark #mermaid .classLabel .label{fill:#81B1DB;}html.theme-dark #mermaid .relation{stroke:lightgrey;stroke-width:1;fill:none;}html.theme-dark #mermaid .dashed-line{stroke-dasharray:3;}html.theme-dark #mermaid #compositionStart,html.theme-dark #mermaid .composition{fill:lightgrey!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid #compositionEnd,html.theme-dark #mermaid .composition{fill:lightgrey!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid #dependencyStart,html.theme-dark #mermaid .dependency{fill:lightgrey!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid #dependencyStart,html.theme-dark #mermaid .dependency{fill:lightgrey!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid #extensionStart,html.theme-dark #mermaid .extension{fill:lightgrey!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid #extensionEnd,html.theme-dark #mermaid .extension{fill:lightgrey!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid #aggregationStart,html.theme-dark #mermaid .aggregation{fill:#1f2020!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid #aggregationEnd,html.theme-dark #mermaid .aggregation{fill:#1f2020!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid #lollipopStart,html.theme-dark #mermaid .lollipop{fill:#1f2020!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid #lollipopEnd,html.theme-dark #mermaid .lollipop{fill:#1f2020!important;stroke:lightgrey!important;stroke-width:1;}html.theme-dark #mermaid .edgeTerminals{}html.theme-dark #mermaid :root{--mermaid-}
/** Git graph */
html.theme-dark #mermaid .commit-id,html.theme-dark #mermaid .commit-msg,html.theme-dark #mermaid .branch-label{fill:lightgrey;color:lightgrey;}html.theme-dark #mermaid .branch-label0{fill:undefined;}html.theme-dark #mermaid .commit0{stroke:hsl(180, 1.5873015873%, 48.3529411765%);fill:hsl(180, 1.5873015873%, 48.3529411765%);}html.theme-dark #mermaid .commit-highlight0{stroke:rgb(133.6571428571, 129.7428571428, 129.7428571428);fill:rgb(133.6571428571, 129.7428571428, 129.7428571428);}html.theme-dark #mermaid .label0{fill:hsl(180, 1.5873015873%, 48.3529411765%);}html.theme-dark #mermaid .arrow0{stroke:hsl(180, 1.5873015873%, 48.3529411765%);}html.theme-dark #mermaid .branch-label1{fill:undefined;}html.theme-dark #mermaid .commit1{stroke:hsl(321.6393442623, 65.5913978495%, 38.2352941176%);fill:hsl(321.6393442623, 65.5913978495%, 38.2352941176%);}html.theme-dark #mermaid .commit-highlight1{stroke:rgb(93.5483870969, 221.4516129033, 139.677419355);fill:rgb(93.5483870969, 221.4516129033, 139.677419355);}html.theme-dark #mermaid .label1{fill:hsl(321.6393442623, 65.5913978495%, 38.2352941176%);}html.theme-dark #mermaid .arrow1{stroke:hsl(321.6393442623, 65.5913978495%, 38.2352941176%);}html.theme-dark #mermaid .branch-label2{fill:undefined;}html.theme-dark #mermaid .commit2{stroke:hsl(194.4, 16.5562913907%, 49.6078431373%);fill:hsl(194.4, 16.5562913907%, 49.6078431373%);}html.theme-dark #mermaid .commit-highlight2{stroke:rgb(149.4437086091, 117.6092715231, 107.5562913906);fill:rgb(149.4437086091, 117.6092715231, 107.5562913906);}html.theme-dark #mermaid .label2{fill:hsl(194.4, 16.5562913907%, 49.6078431373%);}html.theme-dark #mermaid .arrow2{stroke:hsl(194.4, 16.5562913907%, 49.6078431373%);}html.theme-dark #mermaid .branch-label3{fill:undefined;}html.theme-dark #mermaid .commit3{stroke:hsl(23.0769230769, 49.0566037736%, 40.7843137255%);fill:hsl(23.0769230769, 49.0566037736%, 40.7843137255%);}html.theme-dark #mermaid .commit-highlight3{stroke:rgb(99.9811320754, 162.7735849057, 202.0188679245);fill:rgb(99.9811320754, 162.7735849057, 202.0188679245);}html.theme-dark #mermaid .label3{fill:hsl(23.0769230769, 49.0566037736%, 40.7843137255%);}html.theme-dark #mermaid .arrow3{stroke:hsl(23.0769230769, 49.0566037736%, 40.7843137255%);}html.theme-dark #mermaid .branch-label4{fill:undefined;}html.theme-dark #mermaid .commit4{stroke:hsl(0, 83.3333333333%, 43.5294117647%);fill:hsl(0, 83.3333333333%, 43.5294117647%);}html.theme-dark #mermaid .commit-highlight4{stroke:rgb(51.5000000001, 236.5, 236.5);fill:rgb(51.5000000001, 236.5, 236.5);}html.theme-dark #mermaid .label4{fill:hsl(0, 83.3333333333%, 43.5294117647%);}html.theme-dark #mermaid .arrow4{stroke:hsl(0, 83.3333333333%, 43.5294117647%);}html.theme-dark #mermaid .branch-label5{fill:undefined;}html.theme-dark #mermaid .commit5{stroke:hsl(289.1666666667, 100%, 24.1176470588%);fill:hsl(289.1666666667, 100%, 24.1176470588%);}html.theme-dark #mermaid .commit-highlight5{stroke:rgb(154.2083333334, 255, 132.0000000001);fill:rgb(154.2083333334, 255, 132.0000000001);}html.theme-dark #mermaid .label5{fill:hsl(289.1666666667, 100%, 24.1176470588%);}html.theme-dark #mermaid .arrow5{stroke:hsl(289.1666666667, 100%, 24.1176470588%);}html.theme-dark #mermaid .branch-label6{fill:undefined;}html.theme-dark #mermaid .commit6{stroke:hsl(35.1315789474, 98.7012987013%, 40.1960784314%);fill:hsl(35.1315789474, 98.7012987013%, 40.1960784314%);}html.theme-dark #mermaid .commit-highlight6{stroke:rgb(51.331168831, 135.1948051946, 253.6688311688);fill:rgb(51.331168831, 135.1948051946, 253.6688311688);}html.theme-dark #mermaid .label6{fill:hsl(35.1315789474, 98.7012987013%, 40.1960784314%);}html.theme-dark #mermaid .arrow6{stroke:hsl(35.1315789474, 98.7012987013%, 40.1960784314%);}html.theme-dark #mermaid .branch-label7{fill:undefined;}html.theme-dark #mermaid .commit7{stroke:hsl(106.1538461538, 84.4155844156%, 35.0980392157%);fill:hsl(106.1538461538, 84.4155844156%, 35.0980392157%);}html.theme-dark #mermaid .commit-highlight7{stroke:rgb(206.1818181817, 89.948051948, 241.051948052);fill:rgb(206.1818181817, 89.948051948, 241.051948052);}html.theme-dark #mermaid .label7{fill:hsl(106.1538461538, 84.4155844156%, 35.0980392157%);}html.theme-dark #mermaid .arrow7{stroke:hsl(106.1538461538, 84.4155844156%, 35.0980392157%);}html.theme-dark #mermaid .branch{stroke-width:1;stroke:lightgrey;stroke-dasharray:2;}html.theme-dark #mermaid .commit-label{fill:rgb(183.8476190475, 181.5523809523, 181.5523809523);}html.theme-dark #mermaid .commit-label-bkg{fill:hsl(180, 1.5873015873%, 28.3529411765%);opacity:0.5;}html.theme-dark #mermaid .tag-label{fill:#e0dfdf;}html.theme-dark #mermaid .tag-label-bkg{fill:#1f2020;stroke:#cccccc;}html.theme-dark #mermaid .tag-hole{fill:#ccc;}html.theme-dark #mermaid .commit-merge{stroke:#1f2020;fill:#1f2020;}html.theme-dark #mermaid .commit-reverse{stroke:#1f2020;fill:#1f2020;stroke-width:3;}html.theme-dark #mermaid .commit-highlight-inner{stroke:#1f2020;fill:#1f2020;}html.theme-dark #mermaid .arrow{stroke-width:8;stroke-linecap:round;fill:none;}:root{--mermaid-}
/** Entity relationship */
html.theme-dark #mermaid .entityBox{fill:#1f2020;stroke:#81B1DB;}html.theme-dark #mermaid .attributeBoxOdd{fill:hsl(0, 0%, 32%);stroke:#81B1DB;}html.theme-dark #mermaid .attributeBoxEven{fill:hsl(0, 0%, 22%);stroke:#81B1DB;}html.theme-dark #mermaid .relationshipLabelBox{fill:hsl(20, 1.5873015873%, 12.3529411765%);opacity:0.7;background-color:hsl(20, 1.5873015873%, 12.3529411765%);}html.theme-dark #mermaid .relationshipLabelBox rect{opacity:0.5;}html.theme-dark #mermaid .relationshipLine{stroke:lightgrey;}html.theme-dark #mermaid :root{--mermaid-}
/** Journey */
html.theme-dark #mermaid .label{color:#ccc;}html.theme-dark #mermaid .mouth{stroke:#666;}html.theme-dark #mermaid line{stroke:#ccc;}html.theme-dark #mermaid .legend{fill:#ccc;}html.theme-dark #mermaid .label text{fill:#333;}html.theme-dark #mermaid .label{color:#ccc;}html.theme-dark #mermaid .face{fill:#FFF8DC;stroke:#999;}html.theme-dark #mermaid .node rect,html.theme-dark #mermaid .node circle,html.theme-dark #mermaid .node ellipse,html.theme-dark #mermaid .node polygon,html.theme-dark #mermaid .node path{fill:#1f2020;stroke:#81B1DB;stroke-width:1px;}html.theme-dark #mermaid .node .label{text-align:center;}html.theme-dark #mermaid .node.clickable{cursor:pointer;}html.theme-dark #mermaid .arrowheadPath{fill:lightgrey;}html.theme-dark #mermaid .edgePath .path{stroke:lightgrey;stroke-width:1.5px;}html.theme-dark #mermaid .flowchart-link{stroke:lightgrey;fill:none;}html.theme-dark #mermaid .edgeLabel{background-color:hsl(0, 0%, 34.4117647059%);text-align:center;}html.theme-dark #mermaid .edgeLabel rect{opacity:0.5;}html.theme-dark #mermaid .cluster text{fill:#F9FFFE;}html.theme-dark #mermaid div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;background:hsl(20, 1.5873015873%, 12.3529411765%);border:1px solid rgba(255, 255, 255, 0.25);border-radius:2px;pointer-events:none;z-index:100;}html.theme-dark #mermaid .task-type-0,html.theme-dark #mermaid .section-type-0{fill:#1f2020;}html.theme-dark #mermaid .task-type-1,html.theme-dark #mermaid .section-type-1{fill:hsl(180, 1.5873015873%, 28.3529411765%);}html.theme-dark #mermaid .task-type-2,html.theme-dark #mermaid .section-type-2{fill:hsl(244, 1.5873015873%, 12.3529411765%);}html.theme-dark #mermaid .task-type-3,html.theme-dark #mermaid .section-type-3{fill:hsl(244, 1.5873015873%, 28.3529411765%);}html.theme-dark #mermaid .task-type-4,html.theme-dark #mermaid .section-type-4{fill:hsl(116, 1.5873015873%, 12.3529411765%);}html.theme-dark #mermaid .task-type-5,html.theme-dark #mermaid .section-type-5{fill:hsl(116, 1.5873015873%, 28.3529411765%);}html.theme-dark #mermaid .task-type-6,html.theme-dark #mermaid .section-type-6{fill:hsl(308, 1.5873015873%, 12.3529411765%);}html.theme-dark #mermaid .task-type-7,html.theme-dark #mermaid .section-type-7{fill:hsl(308, 1.5873015873%, 28.3529411765%);}html.theme-dark #mermaid :root{--mermaid-}
/** State diagram */
html.theme-dark #mermaid defs #statediagram-barbEnd{fill:lightgrey;stroke:lightgrey;}html.theme-dark #mermaid g.stateGroup text{fill:#81B1DB;stroke:none;}html.theme-dark #mermaid g.stateGroup text{fill:#ccc;stroke:none;}html.theme-dark #mermaid g.stateGroup .state-title{font-weight:bolder;fill:#e0dfdf;}html.theme-dark #mermaid g.stateGroup rect{fill:#1f2020;stroke:#81B1DB;}html.theme-dark #mermaid g.stateGroup line{stroke:lightgrey;stroke-width:1;}html.theme-dark #mermaid .transition{stroke:lightgrey;stroke-width:1;fill:none;}html.theme-dark #mermaid .stateGroup .composit{fill:#333;border-bottom:1px;}html.theme-dark #mermaid .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}html.theme-dark #mermaid .state-note{stroke:hsl(180, 0%, 18.3529411765%);fill:hsl(180, 1.5873015873%, 28.3529411765%);}html.theme-dark #mermaid .state-note text{fill:rgb(183.8476190475, 181.5523809523, 181.5523809523);stroke:none;}html.theme-dark #mermaid .stateLabel .box{stroke:none;stroke-width:0;fill:#1f2020;opacity:0.5;}html.theme-dark #mermaid .edgeLabel .label rect{fill:#1f2020;opacity:0.5;}html.theme-dark #mermaid .edgeLabel .label text{fill:#ccc;}html.theme-dark #mermaid .label div .edgeLabel{color:#ccc;}html.theme-dark #mermaid .stateLabel text{fill:#e0dfdf;font-weight:bold;}html.theme-dark #mermaid .node circle.state-start{fill:#f4f4f4;stroke:#f4f4f4;}html.theme-dark #mermaid .node .fork-join{fill:#f4f4f4;stroke:#f4f4f4;}html.theme-dark #mermaid .node circle.state-end{fill:#cccccc;stroke:#333;stroke-width:1.5;}html.theme-dark #mermaid .end-state-inner{fill:#333;stroke-width:1.5;}html.theme-dark #mermaid .node rect{fill:#1f2020;stroke:#81B1DB;stroke-width:1px;}html.theme-dark #mermaid .node polygon{fill:#1f2020;stroke:#81B1DB;stroke-width:1px;}html.theme-dark #mermaid #statediagram-barbEnd{fill:lightgrey;}html.theme-dark #mermaid .statediagram-cluster rect{fill:#1f2020;stroke:#81B1DB;stroke-width:1px;}html.theme-dark #mermaid .cluster-label,html.theme-dark #mermaid .nodeLabel{color:#e0dfdf;}html.theme-dark #mermaid .statediagram-cluster rect.outer{rx:5px;ry:5px;}html.theme-dark #mermaid .statediagram-state .divider{stroke:#81B1DB;}html.theme-dark #mermaid .statediagram-state .title-state{rx:5px;ry:5px;}html.theme-dark #mermaid .statediagram-cluster.statediagram-cluster .inner{fill:#333;}html.theme-dark #mermaid .statediagram-cluster.statediagram-cluster-alt .inner{fill:#555;}html.theme-dark #mermaid .statediagram-cluster .inner{rx:0;ry:0;}html.theme-dark #mermaid .statediagram-state rect.basic{rx:5px;ry:5px;}html.theme-dark #mermaid .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#555;}html.theme-dark #mermaid .note-edge{stroke-dasharray:5;}html.theme-dark #mermaid .statediagram-note rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:hsl(180, 0%, 18.3529411765%);stroke-width:1px;rx:0;ry:0;}html.theme-dark #mermaid .statediagram-note rect{fill:hsl(180, 1.5873015873%, 28.3529411765%);stroke:hsl(180, 0%, 18.3529411765%);stroke-width:1px;rx:0;ry:0;}html.theme-dark #mermaid .statediagram-note text{fill:rgb(183.8476190475, 181.5523809523, 181.5523809523);}html.theme-dark #mermaid .statediagram-note .nodeLabel{color:rgb(183.8476190475, 181.5523809523, 181.5523809523);}html.theme-dark #mermaid .statediagram .edgeLabel{color:red;}html.theme-dark #mermaid #dependencyStart,html.theme-dark #mermaid #dependencyEnd{fill:lightgrey;stroke:lightgrey;stroke-width:1;}html.theme-dark #mermaid :root{--mermaid-}
/** Pie chart */
html.theme-dark #mermaid .pieCircle{filter: brightness(0.7);} html.theme-dark #mermaid[aria-roledescription=pie] .legend rect { filter: brightness(0.7); } html.theme-dark #mermaid .pieTitleText{text-anchor:middle;fill:hsl(28.5714285714, 17.3553719008%, 86.2745098039%);}html.theme-dark #mermaid .slice{fill:#222;}html.theme-dark #mermaid .legend text{fill:hsl(28.5714285714, 17.3553719008%, 86.2745098039%);}html.theme-dark #mermaid :root{--mermaid-}
/** Requirements */
html.theme-dark #mermaid marker{fill:lightgrey;stroke:lightgrey;}html.theme-dark #mermaid marker.cross{stroke:lightgrey;}html.theme-dark #mermaid svg{}html.theme-dark #mermaid .reqBox{fill:#1f2020;fill-opacity:100%;stroke:#cccccc;stroke-width:#cccccc;}html.theme-dark #mermaid .reqTitle,html.theme-dark #mermaid .reqLabel{fill:#e0dfdf;}html.theme-dark #mermaid .reqLabelBox{fill:hsl(180, 1.5873015873%, 28.3529411765%);fill-opacity:100%;}html.theme-dark #mermaid .req-title-line{stroke:#cccccc;stroke-width:#cccccc;}html.theme-dark #mermaid .relationshipLine{stroke:lightgrey;stroke-width:1;}html.theme-dark #mermaid .relationshipLabel{fill:lightgrey;}html.theme-dark #mermaid :root{--mermaid-}
/** C4 system */
html.theme-dark #mermaid .person{stroke:calculated;fill:calculated;} html.theme-dark #mermaid[aria-roledescription=c4] rect {stroke: #ddd;} html.theme-dark #mermaid[aria-roledescription=c4] text {fill:#eee;}
/** Mind map */
html.theme-dark #mermaid .section-root.mindmap-node { fill: #ccc; } html.theme-dark #mermaid .section-root.mindmap-node text { fill: black; }
html.theme-dark #mermaid .mindmap-edges path, html.theme-dark #mermaid .mindmap-node { filter: hue-rotate(180deg) invert(0.9); }
/** Timeline */
html.theme-dark #mermaid .timeline text tspan { fill: #eee; } html.theme-dark #mermaid .timeline-node path { fill: #222; }

        

        .note {
            background: rgba(77, 187, 95, .2);
        }
        

        .prism {
            page-break-inside: avoid;
        }
        
        /* PrismJS 1.29.0
https://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript+abap+abnf+actionscript+ada+agda+al+antlr4+apacheconf+apex+apl+applescript+aql+arduino+arff+armasm+arturo+asciidoc+aspnet+asm6502+asmatmel+autohotkey+autoit+avisynth+avro-idl+awk+bash+basic+batch+bbcode+bbj+bicep+birb+bison+bnf+bqn+brainfuck+brightscript+bro+bsl+c+csharp+cpp+cfscript+chaiscript+cil+cilkc+cilkcpp+clojure+cmake+cobol+coffeescript+concurnas+csp+cooklang+coq+crystal+css-extras+csv+cue+cypher+d+dart+dataweave+dax+dhall+diff+django+dns-zone-file+docker+dot+ebnf+editorconfig+eiffel+ejs+elixir+elm+etlua+erb+erlang+excel-formula+fsharp+factor+false+firestore-security-rules+flow+fortran+ftl+gml+gap+gcode+gdscript+gedcom+gettext+gherkin+git+glsl+gn+linker-script+go+go-module+gradle+graphql+groovy+haml+handlebars+haskell+haxe+hcl+hlsl+hoon+http+hpkp+hsts+ichigojam+icon+icu-message-format+idris+ignore+inform7+ini+io+j+java+javadoc+javadoclike+javastacktrace+jexl+jolie+jq+jsdoc+js-extras+json+json5+jsonp+jsstacktrace+js-templates+julia+keepalived+keyman+kotlin+kumir+kusto+latex+latte+less+lilypond+liquid+lisp+livescript+llvm+log+lolcode+lua+magma+makefile+markdown+markup-templating+mata+matlab+maxscript+mel+mermaid+metafont+mizar+mongodb+monkey+moonscript+n1ql+n4js+nand2tetris-hdl+naniscript+nasm+neon+nevod+nginx+nim+nix+nsis+objectivec+ocaml+odin+opencl+openqasm+oz+parigp+parser+pascal+pascaligo+psl+pcaxis+peoplecode+perl+php+phpdoc+php-extras+plant-uml+plsql+powerquery+powershell+processing+prolog+promql+properties+protobuf+pug+puppet+pure+purebasic+purescript+python+qsharp+q+qml+qore+r+racket+cshtml+jsx+tsx+reason+regex+rego+renpy+rescript+rest+rip+roboconf+robotframework+ruby+rust+sas+sass+scss+scala+scheme+shell-session+smali+smalltalk+smarty+sml+solidity+solution-file+soy+sparql+splunk-spl+sqf+sql+squirrel+stan+stata+iecst+stylus+supercollider+swift+systemd+t4-templating+t4-cs+t4-vb+tap+tcl+tt2+textile+toml+tremor+turtle+twig+typescript+typoscript+unrealscript+uorazor+uri+v+vala+vbnet+velocity+verilog+vhdl+vim+visual-basic+warpscript+wasm+web-idl+wgsl+wiki+wolfram+wren+xeora+xml-doc+xojo+xquery+yaml+yang+zig&plugins=highlight-keywords */
code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:16px;margin:0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}

        

        .procedure-steps {
            box-sizing: border-box;
            padding: 8px 8px 2px 8px;
        }
        
        .procedure-steps ol {
            margin-block-end: 0;
            margin-block-start: 0;
        }
        

        .prompt {
            flex-direction: row;
            letter-spacing: .0015em;
            font-size: 16px;
            font-weight: 400;
            line-height: 24px;
            margin-left: 0;
            margin-right: 0;
        }
        

        .prompt-content {
            padding: 15px;
            overflow: hidden;
            flex: 1 1 auto;
        }
        

        .prompt-content-p p {
            margin-block-start: 0;
            margin-block-end: 0;
        }
        

        .prompt-icon {
            flex: 0 0 auto;
            margin-left: 15px;
            margin-top: 15px;
            fill: currentcolor;
            width: 24px;
            height: 24px;
        }
        

        :root {
            width: 95%;
            max-width: 95vw;
            padding: 0 0 0 30px;
        }
        
        body {
            font-family: JetBrains Sans,serif;
        }
        
        a {
            overflow-wrap: anywhere;
            width: 100vw;
        }
        
        
        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff) format("woff");
            font-weight: 300;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff) format("woff");
            font-weight: 400;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff) format("woff");
            font-weight: 600;
            font-style: normal;
        }
        
        
        code {
            display: inline;
            word-break: break-word;
            font-size: 15px;
            line-height: inherit;
            font-variant-ligatures: none;
            font-family: JetBrains Sans,monospace;
            white-space: pre-line;
            overflow-wrap: break-word;
        }
        
        figcaption {
            margin-top: 5px;
        }
        
        h2 {
            padding-top: 16px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h3 {
            padding-top: 8px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h4 {
            padding-top: 4px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        p {
            padding: 0;
            border: 0;
            line-height: 25px;
            margin-block-start: 0;
            margin-block-end: 0;
            padding-bottom: 8px;
        }
        
        div {
            display: block;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            page-break-inside: avoid;
        }
        
        th, td {
            border: 1px solid #c4c4c4;
            padding: 10px;
            text-align: left;
            word-break: break-all;
        }
        
        .entry {
            display: grid;
            grid-template-columns: auto max-content;
            grid-template-areas: "chapter page";
            align-items: end;
            gap: 0 .25rem;
            line-height: 25px;
        }
        
        .toc-link-container{
            grid-area: chapter;
            position: relative;
            overflow: hidden;
        }
        
        .toc-link{
            text-decoration: none;
            color: black;
        }
        
        .toc-link-container::after {
            position: absolute;
            padding-left: .25ch;
            content: " . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ";
            text-align: right;
        }
        
        .page {
            grid-area: page;
            width: 30px;
            text-align: right;
        }
        

        .tip {
            background-color: rgba(25, 25, 28, .05);
        }
        

        .topic {
            page-break-before: always;
        }
        

        .warning {
            background: rgba(244, 92, 74, .2);
        }
        </style></head><body><div><section class="topic"><div><article class="article"><h1 class="main-title">Table of contents</h1><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1960446970">Kubernetes</a></div><div class="page">2</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#582896559">Introduction to Kubernetes</a></div><div class="page">5</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#694367538">Core Kubernetes Concepts  &amp; Architecture</a></div><div class="page">8</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1080512975">Kubernetes Installation</a></div><div class="page">12</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#182184986">Deployment Objects</a></div><div class="page">14</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-981565491">Kubernetes Getting Started</a></div><div class="page">20</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1589893004">Service Object</a></div><div class="page">24</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1473562354">Scaling</a></div><div class="page">27</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#650111291">Updating an Image</a></div><div class="page">29</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-193243487">Imperative Approach VS Declarative approach</a></div><div class="page">33</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-125004747">Declarative Approach</a></div><div class="page">34</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1102085553">Volumes</a></div><div class="page">41</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-135891499">Host Path Volume</a></div><div class="page">48</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#833699003">Persistent Volume</a></div><div class="page">50</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1817595902">Environment Variables</a></div><div class="page">55</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1799937961">Kubernetes Networking</a></div><div class="page">57</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-77286534">Deployment</a></div><div class="page">66</div></div></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1960446970">Kubernetes</h1><div class="detached mermaid" id="1960446970#-8txiz8_3"><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="959px" preserveAspectRatio="none" style="width:482px;height:959px;background:#FFFFFF;" version="1.1" viewBox="0 0 482 959" width="482px" zoomAndPan="magnify"><defs/><g><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="93" x="10" y="459.6582"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="20" y="484.7656">Kubernetes</text><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="187" x="153" y="20"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="163" y="45.1074">Introduction to Kubernetes</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,39.3105 143,39.3105 L153,39.3105 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="317" x="153" y="78.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="163" y="103.7285">Kubernetes Architecture and Core Component</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,97.9316 143,97.9316 L153,97.9316 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="94" x="153" y="137.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="163" y="162.3496">Installations</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,156.5527 143,156.5527 L153,156.5527 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="167" x="153" y="195.8633"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="163" y="220.9707">Deployment Objects</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,215.1738 143,215.1738 L153,215.1738 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="193" x="153" y="254.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="163" y="279.5918">Kubernetes Getting Started</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,273.7949 143,273.7949 L153,273.7949 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="129" x="153" y="313.1055"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="163" y="338.2129">Service object</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,332.416 143,332.416 L153,332.416 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="171" x="153" y="371.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="163" y="396.834">Scaling with Kubernetes</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,391.0371 143,391.0371 L153,391.0371 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="125" x="153" y="430.3477"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="163" y="455.4551">Updating Images</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,449.6582 143,449.6582 L153,449.6582 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="306" x="153" y="488.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286" x="163" y="514.0762">Imperative approach vs Declarative approach</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,508.2793 143,508.2793 L153,508.2793 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="171" x="153" y="547.5898"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="163" y="572.6973">Declarative approach</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,566.9004 143,566.9004 L153,566.9004 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="74" x="153" y="606.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="163" y="631.3184">Volumes</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,625.5215 143,625.5215 L153,625.5215 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="128" x="153" y="664.832"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="163" y="689.9395">HostPath Volume</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,684.1426 143,684.1426 L153,684.1426 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="134" x="153" y="723.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="163" y="748.5605">Persistent Volume</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,742.7637 143,742.7637 L153,742.7637 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="162" x="153" y="782.0742"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="163" y="807.1816">Environment Variables</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,801.3848 143,801.3848 L153,801.3848 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="89" x="153" y="840.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="163" y="865.8027">Networking</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,860.0059 143,860.0059 L153,860.0059 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#F1F1F1" height="38.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:1.5;" width="154" x="153" y="899.3164"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="163" y="924.4238">Deployment with EKS</text><path d="M103,478.9688 L113,478.9688 C128,478.9688 128,918.627 143,918.627 L153,918.627 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><!--SRC=[PL7HSjem47pNLznZafbaWaio4pyb1Te28J1ru5tOLr0hIvhpoPdyVKuk0LhxoRFQszlRVMnO4zV6LRKEwWhcSOlaaB5H8DyLJ1sJhsB9nZjWtoUS07YYScyOIuw4e5q58oy_8ry7xz0n72LbgRKwINwgZ35O_rudrdBxMoIQX4D_ntTaDcu7HVADrO5G8BMcHF3TxFbeKMgR-6-6zttpwr3fJcvQwztfvZeW2TxA5I6Gr-KUsaOybbR_Xn_jzv_EJ6oyZVLH_eTlUAN5pb_uWAwG6jDmIk0VVE9QGzvrqMmq6RsrHwKNv3TFV-I0VepTmPDveTGZIhk7XjNAQiVhnJEqQPzqEhZ9RhClDuFiuXiPM4fwsIqCxlFXGtutXCdJAwJtItMncBv2uoD9p9KO9REDgS5BDTEjXf_HiQanXsL0DnlFFu5p_sgsMPm8zyFhhuQxwf1Wir1Z_AMZPPaeVIKtvJ0AW-mkKy_QxQBqamCwDV8YJEyvh8iF]--></g></svg></div></div></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="582896559">Introduction to Kubernetes</h1><section><h2 id="582896559#what-is-the-problem" data-toc="what-is-the-problem#kub-Introduction.md-what-is-the-problem">What is the Problem</h2><p id="582896559#-nh3kjv_7">Manual deployment of containers is hard to maintain , error-prone and annoying. Below are some of the challenges one might face:</p><p id="582896559#-nh3kjv_8"><ul class="list" id="582896559#-nh3kjv_9" start="1"><li class="list-item" id="582896559#-nh3kjv_10"><p>Containers might crash/ go down and need to be replaced</p></li><li class="list-item" id="582896559#-nh3kjv_11"><p>We might need more container instances upon traffic spikes</p></li><li class="list-item" id="582896559#-nh3kjv_12"><p>Incoming traffic should be distributed equally</p></li></ul></p></section><section><h2 id="582896559#but-an-ecs-seems-to-solve-the-above-issue" data-toc="but-an-ecs-seems-to-solve-the-above-issue#kub-Introduction.md-but-an-ecs-seems-to-solve-the-above-issue">But an ECS seems to Solve the above issue</h2><p id="582896559#-nh3kjv_13">Yes, and Elastic Container Service(ECS) can solve the above issue but it locks us in, This might not sound as a major problem if you are using AWS but when you want to switch to another cloud provider its an issue because you will have to learn about the specifics, services and config options of the other cloud provider</p><blockquote class="prompt flex bordered-element-rounded tip detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p><span id="582896559#-nh3kjv_15"><b><font style="color:#00FF00">Kubernetes to the Rescue!</font></b></span></p></div>
</blockquote>
</section><section><h2 id="582896559#what-is-kubernetes" data-toc="what-is-kubernetes#kub-Introduction.md-what-is-kubernetes">What is Kubernetes</h2><p id="582896559#-nh3kjv_16">Kubernetes, also known as K8s, is an open source system for automating deployment, scaling, and management of containerized applications</p><p id="582896559#-nh3kjv_17">It provides a container runtime, container orchestration, container-centric infrastructure orchestration, self-healing mechanisms, service discovery and load balancing. It&rsquo;s used for the deployment, scaling, management, and composition of application containers across clusters of hosts.</p><p id="582896559#-nh3kjv_18">Imagine having a bunch of servers, and you want to run your applications on them without worrying about where exactly they run or how they recover if something goes wrong. Kubernetes takes care of that for you, making sure your applications are always running smoothly.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="582896559#-nh3kjv_19" alt="k1.jpg" title="k1.jpg" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/k1.jpg" width="1321" height="691"><figcaption class="center-text">k1.jpg</figcaption></figure></div></section><section><h2 id="582896559#what-kubernetes-is-not" data-toc="what-kubernetes-is-not#kub-Introduction.md-what-kubernetes-is-not">What Kubernetes is not</h2><blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><ul class="list" id="582896559#-nh3kjv_24" start="1"><li class="list-item" id="582896559#-nh3kjv_25"><p>It's not a cloud service provider</p></li><li class="list-item" id="582896559#-nh3kjv_26"><p>Its not a service by a cloud service provider</p></li><li class="list-item" id="582896559#-nh3kjv_27"><p>It's not restricted to any specific (cloud) Service provider.</p></li><li class="list-item" id="582896559#-nh3kjv_28"><p>Its not just a software you run on some machine</p></li><li class="list-item" id="582896559#-nh3kjv_29"><p>its not an alternative to Docker</p></li><li class="list-item" id="582896559#-nh3kjv_30"><p>its not a paid service</p></li></ul></div>
</blockquote>
<p id="582896559#-nh3kjv_21">Rather it's:</p><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><ul class="list" id="582896559#-nh3kjv_31" start="1"><li class="list-item" id="582896559#-nh3kjv_32"><p>It is an open source project</p></li><li class="list-item" id="582896559#-nh3kjv_33"><p>It can be used with any provider</p></li><li class="list-item" id="582896559#-nh3kjv_34"><p>Its a collection of concepts and tools</p></li><li class="list-item" id="582896559#-nh3kjv_35"><p>It works with (docker) containers</p></li><li class="list-item" id="582896559#-nh3kjv_36"><p>Its is a free open-source project</p></li><li class="list-item" id="582896559#-nh3kjv_37"><p>its not a paid service</p></li></ul></div>
</blockquote>
<blockquote class="prompt flex bordered-element-rounded tip detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>Kubernetes is like Docker-Compose for Multiple Machines</p></div>
</blockquote>
</section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="694367538">Core Kubernetes Concepts  &amp; Architecture</h1><div class="container"><figure class="image-container"><img class="center image image-size" id="694367538#-oq3ymk_3" alt="k2.jpg" title="k2.jpg" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/k2.jpg" width="1501" height="751"><figcaption class="center-text">k2.jpg</figcaption></figure></div><section><h2 id="694367538#the-worker-node" data-toc="the-worker-node#kub-Core-Kubernetes-components-and-architecture.md-the-worker-node">The Worker Node</h2><p id="694367538#-oq3ymk_14">Think of the worker node as one computer/ machine / virtual instance These nodes run the container/containers and are managed by the master Node <div class="container"><figure class="image-container"><img class="center image image-size" id="694367538#-oq3ymk_15" alt="k3.jpg" title="k3.jpg" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/k3.jpg" width="1401" height="801"><figcaption class="center-text">k3.jpg</figcaption></figure></div></p></section><section><h2 id="694367538#kubelet" data-toc="kubelet#kub-Core-Kubernetes-components-and-architecture.md-kubelet">Kubelet:</h2><p id="694367538#-oq3ymk_16">The Kubelet is an agent that runs on each node. It communicates with the Kubernetes control plane (the master node) to make sure the containers are running as expected. The Kubelet ensures that containers described in a PodSpec are running and healthy.</p></section><section><h2 id="694367538#container-runtime" data-toc="container-runtime#kub-Core-Kubernetes-components-and-architecture.md-container-runtime">Container Runtime:</h2><p id="694367538#-oq3ymk_17">This is the software responsible for running the containers. Common container runtimes include Docker, containerd, and CRI-O. The container runtime pulls the container images from a container registry and runs them as containers on the node. \</p></section><section><h2 id="694367538#kube-proxy" data-toc="kube-proxy#kub-Core-Kubernetes-components-and-architecture.md-kube-proxy">Kube-proxy:</h2><p id="694367538#-oq3ymk_18">Kube-proxy is a network proxy that runs on each node in the Kubernetes cluster. It helps in managing the network rules and communication between services. It ensures that each service can reach any other service in the cluster, handling tasks like load balancing and routing traffic to the correct containers.</p></section><section><h2 id="694367538#pods" data-toc="pods#kub-Core-Kubernetes-components-and-architecture.md-pods">Pods:</h2><p id="694367538#-oq3ymk_19">A Pod is the smallest, most basic deployable object in Kubernetes. Each pod represents a single instance of a running process in your cluster. Pods usually contain one or more containers that are tightly coupled and share resources like storage and networking.</p></section><section><h2 id="694367538#the-master-node" data-toc="the-master-node#kub-Core-Kubernetes-components-and-architecture.md-the-master-node">The Master Node</h2><p id="694367538#-oq3ymk_20">The master node (also known as the control plane) in Kubernetes is responsible for managing the entire cluster. It coordinates all activities within the cluster, like scheduling workloads, maintaining the desired state, and handling scaling and updates. Here's what's inside a Kubernetes master node: <div class="container"><figure class="image-container"><img class="center image image-size" id="694367538#-oq3ymk_21" alt="k4.jpg" title="k4.jpg" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/k4.jpg" width="1401" height="761"><figcaption class="center-text">k4.jpg</figcaption></figure></div></p></section><section><h2 id="694367538#api-server" data-toc="api-server#kub-Core-Kubernetes-components-and-architecture.md-api-server">API Server:</h2><p id="694367538#-oq3ymk_22">The API Server is the central management entity that exposes the Kubernetes API. It is the front-end for the Kubernetes control plane. All communication with the cluster, including interactions with the nodes, happens through the API Server. It handles RESTful requests and updates the state of the cluster accordingly.</p></section><section><h2 id="694367538#controller-manager-kube-controller-manager" data-toc="controller-manager-kube-controller-manager#kub-Core-Kubernetes-components-and-architecture.md-controller-manager-kube-controller-manager">Controller Manager (kube-controller-manager):</h2><p id="694367538#-oq3ymk_23">The Controller Manager runs controllers, which are background processes responsible for maintaining the desired state of the cluster. Examples include the Node Controller (which handles node failures), Replication Controller (which ensures that the correct number of pod replicas are running), and the Endpoints Controller (which manages endpoint objects tied to services).</p></section><section><h2 id="694367538#scheduler-kube-scheduler" data-toc="scheduler-kube-scheduler#kub-Core-Kubernetes-components-and-architecture.md-scheduler-kube-scheduler">Scheduler (kube-scheduler):</h2><p id="694367538#-oq3ymk_24">The Scheduler is responsible for placing (or &quot;scheduling&quot;) pods onto nodes in the cluster. It looks at the available resources on each node and matches that with the resource requirements of the pods. The scheduler makes decisions to ensure efficient resource utilization and adheres to any constraints defined in the pods' specifications.</p></section><section><h2 id="694367538#cloud-controller-manager-optional" data-toc="cloud-controller-manager-optional#kub-Core-Kubernetes-components-and-architecture.md-cloud-controller-manager-optional">Cloud Controller Manager (optional):</h2><p id="694367538#-oq3ymk_25">The Cloud Controller Manager is responsible for managing cloud-specific control logic. It allows Kubernetes to interact with the underlying cloud provider, handling tasks like node provisioning, load balancers, and storage. This component is more relevant if you're running Kubernetes on a public cloud like AWS, GCP, or Azure.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1080512975">Kubernetes Installation</h1><section><h2 id="1080512975#we-need-to-install-two-tools" data-toc="we-need-to-install-two-tools#kub-Installation.md-we-need-to-install-two-tools">We need to install Two Tools:</h2><ul class="list" id="1080512975#iu66tx_6" start="1"><li class="list-item" id="1080512975#iu66tx_7"><p>Kubectl</p></li><li class="list-item" id="1080512975#iu66tx_8"><p>Minikube</p></li></ul></section><section><h2 id="1080512975#kubectl" data-toc="kubectl#kub-Installation.md-kubectl">KubeCtl</h2><p id="1080512975#iu66tx_9">The Kubernetes command-line tool, kubectl, allows you to run commands against Kubernetes clusters. You can use kubectl to deploy applications, inspect and manage cluster resources, and view logs.</p><section class="procedure-steps bordered-element detached"><h3 id="1080512975#inject-a-procedure">Instaling KubeCtl</h3><ol class="list list-decimal"><li class="list-item" id="1080512975#iu66tx_11"><p id="1080512975#iu66tx_13">Download Chocolatey</p><p> Chocolatey (<a href="https://chocolatey.org/install">https://chocolatey.org/install</a>)</p></li><li class="list-item" id="1080512975#iu66tx_12"><p id="1080512975#iu66tx_15">Follow the steps in the link below to install Kubectl</p><p> Kubectl (<a href="https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/#install-nonstandard-package-tools">https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/#install-nonstandard-package-tools</a>)</p></li></ol></section></section><section><h2 id="1080512975#installing-minikube" data-toc="installing-minikube#kub-Installation.md-installing-minikube">Installing Minikube</h2><section class="procedure-steps bordered-element detached"><h3 id="1080512975#inject-a-procedure2">Installing Minikube</h3><ol class="list list"><li class="list-item" id="1080512975#iu66tx_23"><p id="1080512975#iu66tx_24">Installing Minikube</p><p> Minikube (<a href="https://minikube.sigs.k8s.io/docs/start/?arch=%2Fwindows%2Fx86-64%2Fstable%2F.exe+download">https://minikube.sigs.k8s.io/docs/start/?arch=%2Fwindows%2Fx86-64%2Fstable%2F.exe+download</a>)</p></li></ol></section><p id="1080512975#iu66tx_18">Now Test:</p><p id="1080512975#iu66tx_19">minikube is local Kubernetes, focusing on making it easy to learn and develop for Kubernetes. All you need is Docker (or similarly compatible) container or a Virtual Machine environment</p><p> Run this On the Terminal: </p><p id="1080512975#iu66tx_20"><span class="inline-code" id="1080512975#iu66tx_26"> minikube dashboard </span></p><p id="1080512975#iu66tx_21">The Output:</p><div class="container"><figure class="image-container"><img class="center image image-size" id="1080512975#iu66tx_22" alt="k3.PNG" title="k3.PNG" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/k3.PNG" width="1886" height="886"><figcaption class="center-text">k3.PNG</figcaption></figure></div></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="182184986">Deployment Objects</h1><p id="182184986#-tv5pro_3">One of the key concepts in Kubernetes is the &quot;desired state,&quot; which refers to the configurations of the applications that you want to deploy and run. Essentially, it's the way you want your applications to be set up and how you want them to behave in a Kubernetes environment. This includes things like how many instances of applications should be running, how those instances should be networked together, what resources they should have access to, and so on. <p id="182184986#-tv5pro_15">So, how do you define the desired state? By using objects.</p></p><section><h2 id="182184986#what-are-kubernetes-objects" data-toc="what-are-kubernetes-objects#kub-DeploymentObjects.md-what-are-kubernetes-objects">What Are Kubernetes Objects?</h2><p id="182184986#-tv5pro_16">Objects are sort of like blueprints. They provide detailed instructions to Kubernetes on how the applications must be set up and managed For example, a Deployment object might specify that you want three replicas (copies) of some application running at all times, while a Service object might define how you want to expose your application to the internet. Kubernetes then takes these instructions and automatically configures and manages the application accordingly, ensuring that it always matches the desired state.</p></section><section><h2 id="182184986#1-pods" data-toc="1-pods#kub-DeploymentObjects.md-1-pods">1. Pods</h2><p id="182184986#-tv5pro_17">Pods are the fundamental building blocks of the Kubernetes system. They are used to deploy, scale, and manage containerized applications in a cluster.</p><p id="182184986#-tv5pro_18">A Pod can host a single container or a group of containers that need to &quot;sit closer together&quot;. By grouping two or more containers in a single Pod, they will be able to communicate much faster and share data more easily. It's important to note that, when a Pod contains multiple containers, all of the containers always run on a single worker node. They never span across multiple worker nodes. One important characteristic of Pods is that they are ephemeral in nature. This means that they are not guaranteed to have a long-term lifespan. They can be created, destroyed, and recreated at any time if required</p></section><section><h2 id="182184986#2-deployment" data-toc="2-deployment#kub-DeploymentObjects.md-2-deployment">2. Deployment</h2><p id="182184986#-tv5pro_19">In Kubernetes, a Deployment object is used to manage the lifecycle of one or more identical Pods. A Deployment allows you to declaratively manage the desired state of your application, such as the number of replicas, the image to use for the Pods, and the resources required. Declaratively managing the state means specifying the desired end state of an application, rather than describing the steps to reach that state. Kubernetes figures out the steps on its own. So it will know what it has to do to launch the Deployment, according to the specifications provided by the user.</p><p id="182184986#-tv5pro_20">When you create a Deployment, you provide a Pod template, which defines the configuration of the Pods that the Deployment will manage. The Deployment then creates Pods that match this template, using a ReplicaSet. A ReplicaSet is responsible for creating and scaling Pods, and for ensuring that Pods that fail are replaced. When you update a Deployment, it will update the ReplicaSet, which in turn updates the Pods.</p><p id="182184986#-tv5pro_21">It's important to note that Deployment objects are used to manage stateless applications. Stateless applications are those that do not maintain any persistent data or state. This means that if a container running the application crashes or is terminated, it can be easily replaced. There's no need to preserve any data before deleting the old container and replacing it with a new one. Examples of stateless applications include web servers and load balancers.</p></section><section><h2 id="182184986#3-replicasets" data-toc="3-replicasets#kub-DeploymentObjects.md-3-replicasets">3. ReplicaSets</h2><p id="182184986#-tv5pro_22">In Kubernetes, Deployments don&rsquo;t manage Pods directly. That&rsquo;s the job of the ReplicaSet object. When you create a Deployment in Kubernetes, a ReplicaSet is created automatically. The ReplicaSet ensures that the desired number of replicas (copies) are running at all times by creating or deleting Pods as needed.</p><p id="182184986#-tv5pro_23">To accomplish this, Kubernetes uses a concept called reconciliation loops. A reconciliation loop is a process that compares the desired state of a system with its current state and takes actions to bring the current state in line with the desired state.</p><p id="182184986#-tv5pro_24">Let's say you have specified that you want 3 replicas of a web server Pod to be running in your Kubernetes cluster. The reconciliation loop is constantly monitoring the current state of the cluster and comparing it to the desired state of 3 replicas. If it finds that there are only 2 replicas currently running, it will create a new replica to bring the current state in line with the desired state.</p></section><section><h2 id="182184986#4-statefulset" data-toc="4-statefulset#kub-DeploymentObjects.md-4-statefulset">4. StatefulSet</h2><p id="182184986#-tv5pro_25">A StatefulSet is a Kubernetes object that is used to manage stateful applications. The word &quot;state&quot; means any stored data that the application or component needs to do its work. This state is typically stored in a persistent storage backend, such as a disk, or a database. And the state is maintained even if the underlying Pods/containers are recreated. The most common example of a stateful component in applications is a database such as MySQL or MongoDB.</p><p id="182184986#-tv5pro_26">The StatefulSet ensures that each Pod is uniquely identified by a number, starting at zero. This allows for a consistent naming scheme for each Pod and its associated resources, such as persistent storage (for example, when Volumes are used).</p><p id="182184986#-tv5pro_27">When a Pod in a StatefulSet must be replaced, for example, due to node failure, the new Pod is assigned the same numeric identifier as the previous Pod. This ensures that the new Pod has the same unique identity and is attached to the same persistent storage (Volume) that the previous Pod was using.</p><p id="182184986#-tv5pro_28">This allows for the preservation of state and data across Pod replacements. This is important for applications that do work that periodically adds, removes, or changes some data. They basically need to remember &quot;what has happened in the past&quot; (previous state). For example, a Pod can add a new entry to a database, maybe the email address of a new user. If the Pod has to be recreated, you don't want to lose the email address that was previously added.</p></section><section><h2 id="182184986#5-daemonsets" data-toc="5-daemonsets#kub-DeploymentObjects.md-5-daemonsets">5. DaemonSets</h2><p id="182184986#-tv5pro_29">A DaemonSet ensures that a copy of a Pod is running across all, or a subset of nodes in a Kubernetes cluster.</p><p id="182184986#-tv5pro_30">DaemonSets are useful for running system-level services, such as logging or monitoring agents, that need to run on every node in a cluster. Logging agents are used to collect log data from all the nodes in a cluster and send it to a centralized logging system for storage and analysis. Monitoring agents are used to collect metrics and performance data from all the nodes in a cluster, and send it to a monitoring system for analysis and alerting.</p><p id="182184986#-tv5pro_31">Like ReplicaSets, DaemonSets are managed by a reconciliation loop. A reconciliation loop is a mechanism that continuously checks and compares the desired state of a resource with the current state. The loop runs periodically and ensures that the DaemonSet is always in the desired state, automatically creating or deleting Pods as necessary.</p></section><section><h2 id="182184986#6-persistentvolume" data-toc="6-persistentvolume#kub-DeploymentObjects.md-6-persistentvolume">6. PersistentVolume</h2><p id="182184986#-tv5pro_32">PersistentVolume represents a piece of storage that you can attach to your Pod(s).</p><p id="182184986#-tv5pro_33">The reason it's called &quot;persistent&quot; is because it's not tied to the life cycle of your Pod. In other words, even if your Pod gets deleted, the PersistentVolume will survive.</p><p id="182184986#-tv5pro_34">And there are a lot of different types of storage that you can attach using a PersistentVolume, like local disks, network storage, and cloud storage.</p><p id="182184986#-tv5pro_35">There are a few different use cases for PersistentVolumes in Kubernetes. One common use case is for databases. If you're running a database inside a Pod, you'll likely want to store the database files on a separate piece of storage that can persist even if the Pod gets deleted. And PersistentVolume can do that.</p></section><section><h2 id="182184986#7-service" data-toc="7-service#kub-DeploymentObjects.md-7-service">7. Service</h2><p id="182184986#-tv5pro_36">A Kubernetes Service is a way to access a group of Pods that provide the same functionality. It creates a single, consistent point of entry for clients to access the service, regardless of the location of the Pods.</p><p id="182184986#-tv5pro_37">For example, imagine you have a Kubernetes cluster with multiple Pods running a web application. Each Pod has its own IP address, but this can change at any time if the Pod is moved to another node, or recreated. So the IP address becomes a &quot;moving target&quot;. The destination(s) that clients should reach is unstable, and hard to track.</p><p id="182184986#-tv5pro_38">To make it easier for clients to access the web application, you can create a Kubernetes Service that has a stable IP address. Clients can then connect to that IP, and their requests will be routed to one of the Pods running the web application.</p><p id="182184986#-tv5pro_39">One of the key benefits of using a Service is that it provides a stable endpoint that doesn't change even if the underlying Pods are recreated or replaced. This makes it much easier to update and maintain the application, as clients don't need to be updated with new IP addresses.</p><p id="182184986#-tv5pro_40">Furthermore, the Service also provides some simple load balancing. If clients would connect to a certain IP address of a specific Pod, that Pod would be overused, while the other ones would be sitting idle, doing nothing. But the Service can spread out requests to multiple Pods (load balance). By spreading these out, all Pods are used equally. However, each one has less work to do, as it only receives a small part of the total number of incoming requests.</p></section><section><h2 id="182184986#8-namespaces" data-toc="8-namespaces#kub-DeploymentObjects.md-8-namespaces">8. Namespaces</h2><p id="182184986#-tv5pro_41">A Kubernetes namespace is a way to divide a single Kubernetes cluster into multiple virtual clusters. This allows resources to be isolated from one another. Once a namespace is created, you can launch Kubernetes objects, like Pods, which will only exist in that namespace.</p><p id="182184986#-tv5pro_42">For example, imagine you have a Kubernetes cluster running two applications, &quot;AppA&quot; and &quot;AppB&quot;. To keep things organized, you create two namespaces, &quot;AppA-Namespace&quot; and &quot;AppB-Namespace&quot;.</p><p id="182184986#-tv5pro_43">Now, when you deploy Pods for &quot;AppA&quot;, you can do so within the &quot;AppA-Namespace&quot;. Similarly, when you deploy Pods for &quot;AppB&quot;, you can do so within the &quot;AppB-Namespace&quot;. What's a possible use case?</p><p id="182184986#-tv5pro_44">Well, imagine AppA, and AppB are almost identical. One is version 1.16 of an app, the other is version 1.17. They use almost the same objects, the same Pod structures, the same Services, and so on. Since they're so similar, there's a risk of them interfering with each other. For example, AppA might accidentally send requests to a similar Service or Pod used by AppB. But you want to test the new 1.17 version in a realistic scenario in the same cluster, using the same objects and definitions.</p><p id="182184986#-tv5pro_45">By using namespaces, you can perform as many operations as you need while eliminating the risk of impacting resources that are in another namespace. It's almost as if you have a second Kubernetes cluster. AppA runs in its own (virtual) cluster. AppB runs in a separate (virtual) cluster. But you don't actually have to go through the trouble of setting up an additional cluster. AppA and AppB are logically isolated from each other when they exist in separate namespaces. Even if they run identical Pods that want to access Services with identical names, there's no risk of them interfering with each other.</p></section><section><h2 id="182184986#9-10-configmaps-secrets" data-toc="9-10-configmaps-secrets#kub-DeploymentObjects.md-9-10-configmaps-secrets">9-10. ConfigMaps &amp; Secrets</h2><p id="182184986#-tv5pro_46">ConfigMaps and Secrets are two very important objects that allow you to configure the apps that run in your Pods. Configuring apps refers to setting various parameters or options that control the behaviors of the apps. This can include things like database connection strings or API keys.</p><p id="182184986#-tv5pro_47">ConfigMaps are used to store non-sensitive configuration values. For example, environment variables used to provide runtime configuration information such as the URL of an external API, rather than confidential information such as passwords, are considered non-sensitive data.</p><p id="182184986#-tv5pro_48">Secrets, on the other hand, are meant to hold sensitive configuration values, such as database passwords, API keys, and other information that only authorized apps should be able to access.</p><p id="182184986#-tv5pro_49">ConfigMaps and Secrets can be injected into Pods with the help of environment variables, command-line arguments, or configuration files included in the volumes attached to those Pods.</p><p id="182184986#-tv5pro_50">By using ConfigMaps and Secrets, you decouple the applications running in your Pods from their configuration values. This means you can easily update the configuration of your applications without having to rebuild or redeploy them.</p></section><section><h2 id="182184986#11-job" data-toc="11-job#kub-DeploymentObjects.md-11-job">11. Job</h2><div class="detached code-block" id="182184986#-tv5pro_51"><pre><code class="language-none">A job object is used to run specific tasks that have the following properties:</code></pre></div><p id="182184986#-tv5pro_52">They are short-lived. They need to be executed once. But most importantly, Kubernetes has to make sure that the task has been executed correctly and finished its job. An example of where a Kubernetes job can be useful is a database backup. This does not run continuously, so it's a short-lived process. It just needs to start, complete, then exit. It has to be executed once. Even if the backup needs to happen weekly, there will be one separate job per week (CronJobs can be used for jobs that repeat periodically).</p><p id="182184986#-tv5pro_53">Each job has to finish its own weekly task. But it needs to ensure that the Pod executing the backup fully completes this job. For example, a Pod might start a backup. But the database is huge, so this can take hours. For some reason, the backup process fails at 68% progress. Kubernetes sees that the Pod has failed the task, so it can create another one to retry. It will keep on retrying until, finally, one Pod manages to back up the entire database.</p><p id="182184986#-tv5pro_54">In this case, the job required one Pod, and one successful run for one Pod (to ensure the task was completed successfully). But other jobs might require multiple Pods (which can run in parallel) and/or multiple successful runs. For example, a job will be considered complete, only when at least 3 Pods had successful runs and achieved 100% progress on their tasks.</p><blockquote class="prompt flex bordered-element-rounded tip detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>But right Now this may not make sense So Lets dive into the practical Part</p></div>
</blockquote>
</section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-981565491">Kubernetes Getting Started</h1><p id="-981565491#oog0rb_3">Let's try running a project on Kubernetes</p><p id="-981565491#oog0rb_4">Below is the code Snippet:</p><div class="detached code-block" id="-981565491#oog0rb_5"><pre><code class="language-javascript">const express= require('express')
const app = express()
app.get(&quot;/&quot;, (req,res)=&gt;{
    res.send(`     
        &lt;h1&gt; Hello Kubernetes &lt;/h1&gt;
        `)
})
app.get('/error', (req,res)=&gt;{
    process.exit(1)
})

app.listen(80, ()=&gt;{
console.log(&quot;App is Running...&quot;);

})</code></pre></div><p id="-981565491#oog0rb_6">We Still need to Come up with a Docker Image (The image will be running in the pods)</p><p id="-981565491#oog0rb_7">Below are the Docker commands to create the Image:</p><div class="detached code-block" id="-981565491#oog0rb_8"><pre><code class="language-dockerfile">FROM node:22-alpine

WORKDIR /app

COPY package*.json /app

RUN npm install

COPY . .

EXPOSE 80

CMD [ &quot;npm&quot;, &quot;start&quot; ]</code></pre></div><p id="-981565491#oog0rb_9">To build the Image Run</p><div class="detached code-block" id="-981565491#oog0rb_10"><pre><code class="language-dockerfile">docker build -t node-app .</code></pre></div><p id="-981565491#oog0rb_11">Let's create a Pod that will run this image, to do this we will use the deployment object, Run this Command:</p><div class="detached code-block" id="-981565491#oog0rb_12"><pre><code class="language-dockerfile">kubectl create deployment node-object --image=node-app</code></pre></div><p id="-981565491#oog0rb_13">This command will create a deployment object called node-object from an Image called node-app. The image is supposed to run in a pod which will be automatically created for you</p><p id="-981565491#oog0rb_14">To check the active Deployments Run:</p><div class="detached code-block" id="-981565491#oog0rb_15"><pre><code class="language-dockerfile">kubectl get deployments</code></pre></div><p id="-981565491#oog0rb_16">This Should be the output : <div class="container"><figure class="image-container"><img class="center image image-size" id="-981565491#oog0rb_37" alt="image_2.png" title="image_2.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_2.png" width="429" height="38"><figcaption class="center-text">image_2.png</figcaption></figure></div></p><p id="-981565491#oog0rb_17">Now let's get all the Pods</p><div class="detached code-block" id="-981565491#oog0rb_18"><pre><code class="language-dockerfile">kubectl get pods</code></pre></div><div class="container"><figure class="image-container"><img class="center image image-size" id="-981565491#oog0rb_19" alt="image_3.png" title="image_3.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_3.png" width="542" height="35"><figcaption class="center-text">image_3.png</figcaption></figure></div><p id="-981565491#oog0rb_20">The above might also display error in the status tab. This means that the image never built.</p><blockquote class="prompt flex bordered-element-rounded tip detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p><span id="-981565491#oog0rb_38"><b><font style="color:#00FF00">The Cluster will try to pull the images from a Container Registry( e.g. DockerHub, ECR ) but in our case the Image is located locally.</font></b></span></p></div>
</blockquote>
<p id="-981565491#oog0rb_22">So now lets Push the Image to DockerHub, then the Cluster can pull from there.</p><p id="-981565491#oog0rb_23">Fist Create a repository in your DockerHub: <div class="container"><figure class="image-container"><img class="center image image-size" id="-981565491#oog0rb_39" alt="image_5.png" title="image_5.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_5.png" width="1808" height="322"><figcaption class="center-text">image_5.png</figcaption></figure></div></p><p id="-981565491#oog0rb_24">Then tag you Image with the new Name</p><div class="detached code-block" id="-981565491#oog0rb_25"><pre><code class="language-dockerfile">docker tag node-app ndambuki/kub-node-app</code></pre></div><p id="-981565491#oog0rb_26">The Push the Image to your Docker Hub</p><div class="detached code-block" id="-981565491#oog0rb_27"><pre><code class="language-dockerfile">docker push  ndambuki/kub-node-app</code></pre></div><p id="-981565491#oog0rb_28">Now we can Delete the Previous Deployment since it failed and Recreate again</p><p id="-981565491#oog0rb_29">Delete:</p><div class="detached code-block" id="-981565491#oog0rb_30"><pre><code class="language-dockerfile">kubectl delete  deployment node-object</code></pre></div><p id="-981565491#oog0rb_31">Recreate and pass the right image( From DockerHub):</p><div class="detached code-block" id="-981565491#oog0rb_32"><pre><code class="language-dockerfile">kubectl create deployment node-object --image=ndambuki/kub-node-app</code></pre></div><p id="-981565491#oog0rb_33">Now when we get pods we should see the Container Running:</p><div class="detached code-block" id="-981565491#oog0rb_34"><pre><code class="language-dockerfile">kubectl get pods</code></pre></div><p id="-981565491#oog0rb_35">Output : <div class="container"><figure class="image-container"><img class="center image image-size" id="-981565491#oog0rb_40" alt="image_6.png" title="image_6.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_6.png" width="466" height="34"><figcaption class="center-text">image_6.png</figcaption></figure></div></p><p id="-981565491#oog0rb_36">But we still are not able to access the application : Lets look at another Object (Service object )</p></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1589893004">Service Object</h1><section><h2 id="1589893004#problem" data-toc="problem#kub-service-object.md-problem">Problem</h2><p id="1589893004#i9412w_4">We now want to access the Pod with the Node app, the pod has an IP address but this can change anytime if the pod is moved or recreated and this will make it hard to track. To make it easier for clients to access the web application, you can create a Kubernetes Service that has a stable IP address. Clients can then connect to that IP, and their requests will be routed to one of the Pods running the web application.</p><p id="1589893004#i9412w_5"><span class="control" id="1589893004#i9412w_21">One of the key benefits of using a Service is that it provides a stable endpoint that doesn't change even if the underlying Pods are recreated or replaced. This makes it much easier to update and maintain the application, as clients don't need to be updated with new IP addresses.</span></p><p id="1589893004#i9412w_6">Services will allow external access to pods.</p><div class="detached code-block" id="1589893004#i9412w_7"><pre><code class="language-dockerfile">kubectl expose deployment node-object  --type=LoadBalancer   --port=80</code></pre></div><p id="1589893004#i9412w_8">To Confirm Creation:</p><div class="detached code-block" id="1589893004#i9412w_9"><pre><code class="language-dockerfile">kubectl get services</code></pre></div><p id="1589893004#i9412w_10">Output:</p><div class="container"><figure class="image-container"><img class="center image image-size" id="1589893004#i9412w_11" alt="image_7.png" title="image_7.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_7.png" width="892" height="78"><figcaption class="center-text">image_7.png</figcaption></figure></div><p id="1589893004#i9412w_12">Now to run the Service Run this on a terminal with admin privilege:</p><div class="detached code-block" id="1589893004#i9412w_13"><pre><code class="language-dockerfile">minikube service node-object</code></pre></div><p id="1589893004#i9412w_14">The above should run the container and the application on a browser or give you the URL to the site:</p><div class="container"><figure class="image-container"><img class="center image image-size" id="1589893004#i9412w_15" alt="image_8.png" title="image_8.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_8.png" width="848" height="171"><figcaption class="center-text">image_8.png</figcaption></figure></div><p id="1589893004#i9412w_16">When you visit the Site you should see : <div class="container"><figure class="image-container"><img class="center image image-size" id="1589893004#i9412w_22" alt="image_9.png" title="image_9.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_9.png" width="1070" height="346"><figcaption class="center-text">image_9.png</figcaption></figure></div></p><p id="1589893004#i9412w_17">You can also access the Dashboard using:</p><div class="detached code-block" id="1589893004#i9412w_18"><pre><code class="language-dockerfile">minikube dashboard</code></pre></div><p id="1589893004#i9412w_19">This command will open the dashboard on a website, you can check your deployments and even pods : <div class="container"><figure class="image-container"><img class="center image image-size" id="1589893004#i9412w_23" alt="image_10.png" title="image_10.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_10.png" width="1862" height="775"><figcaption class="center-text">image_10.png</figcaption></figure></div></p><p id="1589893004#i9412w_20">Now if you access the error route, which will crash the application. Kubernetes will automatically recreate a new pod but you will still be able to access the application using the same URl. <span class="control" id="1589893004#i9412w_24">Thanks to services</span></p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1473562354">Scaling</h1><p id="1473562354#-jztwlo_3">Scaling is one of the most important concept, because it focuses on availability of your application</p><section><h2 id="1473562354#scaling-up" data-toc="scaling-up#kub-scaling.md-scaling-up">Scaling Up</h2><p id="1473562354#-jztwlo_6">In kubernetes to scale up and down we use a Replicaset.The ReplicaSet ensures that the desired number of replicas (copies) are running at all times by creating or deleting Pods as needed.</p><p id="1473562354#-jztwlo_7">Below Example will create three replicas of the same Container:</p><div class="detached code-block" id="1473562354#-jztwlo_8"><pre><code class="language-dockerfile">kubectl scale deployment/node-object  --replicas=3</code></pre></div><p id="1473562354#-jztwlo_9">Now If you check your Dashboard you will see two new pods:</p><div class="container"><figure class="image-container"><img class="center image image-size" id="1473562354#-jztwlo_10" alt="image_11.png" title="image_11.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_11.png" width="1460" height="575"><figcaption class="center-text">image_11.png</figcaption></figure></div><p id="1473562354#-jztwlo_11">If you access the error route which will crash the container: <div class="container"><figure class="image-container"><img class="center image image-size" id="1473562354#-jztwlo_13" alt="image_12.png" title="image_12.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_12.png" width="1551" height="558"><figcaption class="center-text">image_12.png</figcaption></figure></div></p><p id="1473562354#-jztwlo_12">But Kubernetes will automatically replace the container with a new Healthy one. While one Container is down the other two pods can accept URL requests.</p></section><section><h2 id="1473562354#scale-down" data-toc="scale-down#kub-scaling.md-scale-down">Scale Down</h2><p id="1473562354#-jztwlo_14">Below Example will downscale from 3 pods to one :</p><div class="detached code-block" id="1473562354#-jztwlo_15"><pre><code class="language-dockerfile">kubectl scale deployment/node-object  --replicas=1</code></pre></div><p id="1473562354#-jztwlo_16">If you check your dashboard you will have only one pod.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="650111291">Updating an Image</h1><p id="650111291#pdvq21_3">Sometimes you make changes to your code, rebuild the image and you want to see the changes appear.</p><p id="650111291#pdvq21_4">Let's start with updating the code</p><div class="detached code-block" id="650111291#pdvq21_5"><pre><code class="language-javascript">const express= require('express')
const app = express()
app.get(&quot;/&quot;, (req,res)=&gt;{
    res.send(`     
        &lt;h1&gt; Hello Kubernetes &lt;/h1&gt;
        &lt;p&gt; Some new Changes &lt;/p&gt;
        `)
})
app.get('/error', (req,res)=&gt;{
    process.exit(1)
})

app.listen(80, ()=&gt;{
    console.log(&quot;App is Running...&quot;);
    
})</code></pre></div><p id="650111291#pdvq21_6">Now lets rebuild the image but for Kubernetes to Pick up the new Changes you must also tag the image with a different variation.</p><div class="detached code-block" id="650111291#pdvq21_7"><pre><code class="language-dockerfile">kubectl set image deployment/node-object  kub-node-app=ndambuki/kub-node-app:V1</code></pre></div><p id="650111291#pdvq21_8">The set command will update an existing Image.You have to select the image you want to update and set it to the new image <span class="emphasis" id="650111291#pdvq21_20">kub-node-app=ndambuki/kub-node-app:V1</span></p><p id="650111291#pdvq21_9">You can always check the status of your update or rollout, in case of an Error it will be Highlighted.</p><p id="650111291#pdvq21_10">An Example would be if we update with a image that does not exist:</p><div class="detached code-block" id="650111291#pdvq21_11"><pre><code class="language-dockerfile">kubectl set image deployment/node-object  kub-node-app=ndambuki/kub-node-app:V3</code></pre></div><p id="650111291#pdvq21_12">Now if you check the status of your Rollout using this command :</p><div class="detached code-block" id="650111291#pdvq21_13"><pre><code class="language-dockerfile">kubectl rollout status deployment/node-object</code></pre></div><p id="650111291#pdvq21_14">This will be the output: <img class="inline-icon image image-size image-container" id="650111291#pdvq21_21" alt="image_13.png" title="image_13.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_13.png" width="700" height="23"></p><p id="650111291#pdvq21_15">and the Dashboard will also show an Error: <div class="container"><figure class="image-container"><img class="center image image-size" id="650111291#pdvq21_22" alt="image_14.png" title="image_14.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_14.png" width="1477" height="272"><figcaption class="center-text">image_14.png</figcaption></figure></div></p><p id="650111291#pdvq21_16">To resolve the issue you can :</p><section><h2 id="650111291#undo-the-rollout" data-toc="undo-the-rollout#kub-updating.md-undo-the-rollout">Undo the Rollout</h2><div class="detached code-block" id="650111291#pdvq21_23"><pre><code class="language-dockerfile">kubectl rollout undo deployment/first-app</code></pre></div><p id="650111291#pdvq21_24">or</p></section><section><h2 id="650111291#set-a-valid-image" data-toc="set-a-valid-image#kub-updating.md-set-a-valid-image">Set a Valid Image</h2><div class="detached code-block" id="650111291#pdvq21_25"><pre><code class="language-dockerfile">kubectl set image deployment/node-object  kub-node-app=ndambuki/kub-node-app:V1</code></pre></div></section><section><h2 id="650111291#deployments-history" data-toc="deployments-history#kub-updating.md-deployments-history">Deployments History</h2><p id="650111291#pdvq21_26">To check the rollout history Run this command:</p><div class="detached code-block" id="650111291#pdvq21_27"><pre><code class="language-dockerfile">kubectl rollout history deployment/node-object</code></pre></div><p id="650111291#pdvq21_28">All Revision will be output: <div class="container"><figure class="image-container"><img class="center image image-size" id="650111291#pdvq21_38" alt="image_15.png" title="image_15.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_15.png" width="216" height="94"><figcaption class="center-text">image_15.png</figcaption></figure></div></p><p id="650111291#pdvq21_29">To show what a revision was about run this command:</p><div class="detached code-block" id="650111291#pdvq21_30"><pre><code class="language-dockerfile">kubectl rollout history deployment/node-object --revision=4</code></pre></div><p id="650111291#pdvq21_31">Output: <div class="container"><figure class="image-container"><img class="center image image-size" id="650111291#pdvq21_39" alt="image_16.png" title="image_16.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_16.png" width="452" height="221"><figcaption class="center-text">image_16.png</figcaption></figure></div></p><p id="650111291#pdvq21_32">This will be able to show which image was used among other configurations.</p><p id="650111291#pdvq21_33">You can Shift to a Previous revision using</p><div class="detached code-block" id="650111291#pdvq21_34"><pre><code class="language-dockerfile">kubectl rollout undo  deployment/node-object --to-revision=1</code></pre></div><p id="650111291#pdvq21_35">Now this will show the first version that we had before updating <div class="container"><figure class="image-container"><img class="center image image-size" id="650111291#pdvq21_40" alt="image_17.png" title="image_17.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_17.png" width="1134" height="326"><figcaption class="center-text">image_17.png</figcaption></figure></div></p><p id="650111291#pdvq21_36">You can go back to the current version by running:</p><div class="detached code-block" id="650111291#pdvq21_37"><pre><code class="language-dockerfile">kubectl rollout undo  deployment/node-object --to-revision=6</code></pre></div></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-193243487">Imperative Approach VS Declarative approach</h1><div class="container"><figure class="image-container"><img class="center image image-size" id="-193243487#-bdqsl9_3" alt="image_18.png" title="image_18.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_18.png" width="1111" height="533"><figcaption class="center-text">image_18.png</figcaption></figure></div><p id="-193243487#-bdqsl9_4">Its becoming tiresome to write commands on the terminal it's time we switch to the declarative approach where we can write the commands on a file.</p></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-125004747">Declarative Approach</h1><p id="-125004747#-3d9xbj_3">Having experienced the huddle of writing kubernetes commands on the terminal, I think its time we come up with a file Just like Docker has docker-compose Kubernetes can also receive instructions from a .yaml file</p><p id="-125004747#-3d9xbj_4">In your Project folder create a file and name it deployment.yaml (the name can vary but the extension must be .yaml)</p><p id="-125004747#-3d9xbj_5">Then copy these Commands to your _.yaml file , an explanation of the commands follows that.</p><div class="detached code-block" id="-125004747#-3d9xbj_6"><pre><code class="language-dockerfile">apiVersion: apps/v1
kind: Deployment
metadata: 
  name: second-app-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: second-app 

  template: 
    metadata:
      labels:
        app: second-app
    spec:
      containers:
        - name: second-node-app
          image: ndambuki/kub-first-app:v1</code></pre></div><section><h2 id="-125004747#deployment-file-explanation" data-toc="deployment-file-explanation#kub-declarative.md-deployment-file-explanation">Deployment File Explanation:</h2><section><h3 id="-125004747#apiversion-apps-v1" data-toc="apiversion-apps-v1#kub-declarative.md-apiversion-apps-v1">apiVersion: apps/v1</h3><p id="-125004747#-3d9xbj_16">This specifies the version of kubernetes API you're using. In this case <span class="emphasis" id="-125004747#-3d9xbj_17"><span class="control" id="-125004747#-3d9xbj_18">apps/v1</span></span> is the API version used for managing applications like Deployments.</p></section><section><h3 id="-125004747#kind-deployment" data-toc="kind-deployment#kub-declarative.md-kind-deployment">kind: Deployment</h3><p id="-125004747#-3d9xbj_19">The kind field tells Kubernetes what type of object you're creating. Here, it's a Deployment.</p><div class="detached code-block" id="-125004747#-3d9xbj_20"><pre><code class="language-javascript">metadata:
name: second-app-deployment</code></pre></div><p id="-125004747#-3d9xbj_21">This section contains metadata for the deployment, like its name. This allows Kubernetes to uniquely identify this resource.</p><p id="-125004747#-3d9xbj_22"><span class="emphasis" id="-125004747#-3d9xbj_23"><span class="control" id="-125004747#-3d9xbj_24">name: second-app-deployment:</span></span> This assigns a name to your Deployment, which is helpful for identifying and managing the Deployment later o</p></section><section><h3 id="-125004747#spec" data-toc="spec#kub-declarative.md-spec">Spec</h3><p id="-125004747#-3d9xbj_25">The spec field defines the desired state for the deployment, including the number of replicas and the configuration of the pods.</p></section><section><h3 id="-125004747#replicas-1" data-toc="replicas-1#kub-declarative.md-replicas-1">replicas: 1</h3><p id="-125004747#-3d9xbj_26">This specifies the number of pod replicas you want to run. In this case, you want a single instance (replica) of the pod running.</p></section><section><h3 id="-125004747#selector" data-toc="selector#kub-declarative.md-selector">selector:</h3><p id="-125004747#-3d9xbj_27">The selector tells the Deployment which pods it should manage. It selects pods that have the app: second-app label.</p><div class="detached code-block" id="-125004747#-3d9xbj_28"><pre><code class="language-javascript">selector:
   matchLabels:
      app: second-app</code></pre></div><p id="-125004747#-3d9xbj_29"><span class="control" id="-125004747#-3d9xbj_30"><span class="emphasis" id="-125004747#-3d9xbj_31">matchLabels: app: second-app</span></span>: This ensures that only pods with the label app: second-app will be considered part of this deployment.</p></section><section><h3 id="-125004747#template" data-toc="template#kub-declarative.md-template">template:</h3><p id="-125004747#-3d9xbj_32">This defines the pod template that will be used for creating the pods</p><div class="detached code-block" id="-125004747#-3d9xbj_33"><pre><code class="language-javascript">template: 
  metadata:
    labels:
      app: second-app</code></pre></div><p id="-125004747#-3d9xbj_34">metadata: labels: app: second-app: The pod template is labeled with app: second-app. This is crucial because the selector matches this label to know which pods the Deployment manages.</p></section><section><h3 id="-125004747#containers" data-toc="containers#kub-declarative.md-containers">containers:</h3><p id="-125004747#-3d9xbj_35">This specifies the containers that will be created within the pods.</p><div class="detached code-block" id="-125004747#-3d9xbj_36"><pre><code class="language-dockerfile">containers:
  - name: second-node-app
    image: ndambuki/kub-first-app:v1</code></pre></div><ul class="list" id="-125004747#-3d9xbj_37" start="1"><li class="list-item" id="-125004747#-3d9xbj_41"><p><span class="control" id="-125004747#-3d9xbj_43"><span class="emphasis" id="-125004747#-3d9xbj_44">name: second-node-app</span></span>: This is the name of the container.</p></li><li class="list-item" id="-125004747#-3d9xbj_42"><p><span class="emphasis" id="-125004747#-3d9xbj_45"><span class="control" id="-125004747#-3d9xbj_46">image: ndambuki/kub-first-app:v1:</span></span> - This specifies the Docker image to be used by the container. Here, it's ndambuki/kub-first-app:v1, which likely refers to a Docker image hosted on a registry like Docker Hub. The tag v1 indicates the version of the image.</p></li></ul><blockquote class="prompt flex bordered-element-rounded tip detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>We have Created now the Deployment but we need a service to be able to access the application so lets create the service first the run both together</p></div>
</blockquote>
<p id="-125004747#-3d9xbj_39">I a separate .yaml file copy the code below:</p><div class="detached code-block" id="-125004747#-3d9xbj_40"><pre><code class="language-dockerfile">apiVersion: v1
kind: Service
metadata:
  name: backend
spec:
  selector:
    app: second-app 
  ports:
    - protocol: 'TCP'
      port: 80
      targetPort: 8080
  type: LoadBalancer</code></pre></div></section></section><section><h2 id="-125004747#service-file-explanation" data-toc="service-file-explanation#kub-declarative.md-service-file-explanation">Service File Explanation</h2><section><h3 id="-125004747#apiversion-v1" data-toc="apiversion-v1#kub-declarative.md-apiversion-v1">apiVersion: v1</h3><p id="-125004747#-3d9xbj_57">This specifies the version of the Kubernetes API you're using. v1 is the version used for basic resources such as Service.</p></section><section><h3 id="-125004747#kind-service" data-toc="kind-service#kub-declarative.md-kind-service">kind: Service</h3><p id="-125004747#-3d9xbj_58">The kind field tells Kubernetes what type of resource you're creating. Here, it's a Service, which is used to expose your application (usually a set of Pods) to the network.</p></section><section><h3 id="-125004747#metadata" data-toc="metadata#kub-declarative.md-metadata">metadata:</h3><p id="-125004747#-3d9xbj_59">This section contains metadata for the service, like its name. This is important for identifying and managing the Service within the Kubernetes cluster.</p><div class="detached code-block" id="-125004747#-3d9xbj_60"><pre><code class="language-dockerfile">metadata:
  name: backend</code></pre></div><p id="-125004747#-3d9xbj_61"><span class="control" id="-125004747#-3d9xbj_62"><span class="emphasis" id="-125004747#-3d9xbj_63">name: backend:</span></span> This assigns a name to your service, in this case, it's named backend.</p></section><section><h3 id="-125004747#spec_1" data-toc="spec_1#kub-declarative.md-spec_1">spec</h3><p id="-125004747#-3d9xbj_64">The spec field defines the desired state for the service, including the configuration that tells the service how it should behave and how it should route traffic.</p></section><section><h3 id="-125004747#selector_1" data-toc="selector_1#kub-declarative.md-selector_1">selector:</h3><p id="-125004747#-3d9xbj_65">The selector field tells the service which pods it should route traffic to, based on pod labels.</p><div class="detached code-block" id="-125004747#-3d9xbj_66"><pre><code class="language-dockerfile">selector:
  app: second-app</code></pre></div><p id="-125004747#-3d9xbj_67"><span class="control" id="-125004747#-3d9xbj_68"><span class="emphasis" id="-125004747#-3d9xbj_69">app: second-app</span></span>: This selector matches the pods with the label app: second-app, which corresponds to the label we defined in the deployment earlier. The service will route traffic to those pods.</p></section><section><h3 id="-125004747#ports" data-toc="ports#kub-declarative.md-ports">ports</h3><p id="-125004747#-3d9xbj_70">This section defines the ports that the service will expose and how they map to the containers inside the pods.</p><div class="detached code-block" id="-125004747#-3d9xbj_71"><pre><code class="language-dockerfile">ports:
  - protocol: 'TCP'
    port: 80
    targetPort: 8080</code></pre></div></section><section><h3 id="-125004747#protocol-tcp" data-toc="protocol-tcp#kub-declarative.md-protocol-tcp">protocol: 'TCP'</h3><p id="-125004747#-3d9xbj_72">This specifies the protocol used for communication. In this case, it's TCP, the most common protocol for network communication.</p></section><section><h3 id="-125004747#port-80" data-toc="port-80#kub-declarative.md-port-80">port: 80</h3><p id="-125004747#-3d9xbj_73">This is the port on which the service will be exposed externally (i.e., the port clients will connect to).</p></section><section><h3 id="-125004747#targetport-8080" data-toc="targetport-8080#kub-declarative.md-targetport-8080">targetPort: 8080</h3><p id="-125004747#-3d9xbj_74">This is the port on the container where the application is running. So, the service forwards traffic from port 80 to port 8080 on the matching pods.</p></section><section><h3 id="-125004747#type-loadbalancer" data-toc="type-loadbalancer#kub-declarative.md-type-loadbalancer">type: LoadBalancer</h3><p id="-125004747#-3d9xbj_75">The type field defines how the service is exposed externally. LoadBalancer: This means the service will be exposed through load balancer</p><p id="-125004747#-3d9xbj_76">Now We have the two Files lets run them</p><div class="detached code-block" id="-125004747#-3d9xbj_77"><pre><code class="language-dockerfile">kubectl apply -f service.yaml -f deployment.yaml</code></pre></div><p id="-125004747#-3d9xbj_78">You should receive these output: <div class="container"><figure class="image-container"><img class="center image image-size" id="-125004747#-3d9xbj_86" alt="image_19.png" title="image_19.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_19.png" width="646" height="57"><figcaption class="center-text">image_19.png</figcaption></figure></div></p><p id="-125004747#-3d9xbj_79">now start the service</p><div class="detached code-block" id="-125004747#-3d9xbj_80"><pre><code class="language-dockerfile">minikube service backend</code></pre></div><p id="-125004747#-3d9xbj_81">You should see the output In case you update something always rerun :</p><div class="detached code-block" id="-125004747#-3d9xbj_82"><pre><code class="language-dockerfile">kubectl apply -f service.yaml -f deployment.yaml</code></pre></div><blockquote class="prompt flex bordered-element-rounded note detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>You can still have one .yaml file instead of two</p></div>
</blockquote>
<div class="detached code-block" id="-125004747#-3d9xbj_84"><pre><code class="language-dockerfile">apiVersion: v1
kind: Service
metadata:
  name: backend
spec:
  selector:
    app: second-app 
  ports:
    - protocol: 'TCP'
      port: 80
      targetPort: 8080
  type: LoadBalancer 

---
  
apiVersion: apps/v1
kind: Deployment
metadata: 
  name: second-app-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: second-app 

  template: 
    metadata:
      labels:
        app: second-app
    spec:
      containers:
        - name: second-node-app
          image: ndambuki/kub-first-app:v1</code></pre></div><p id="-125004747#-3d9xbj_85">Just make sure the different objects are separated by <span class="control" id="-125004747#-3d9xbj_87">---</span> and also start with the service.</p></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1102085553">Volumes</h1><p id="-1102085553#-kwdgyz_3">Attached is a Project find the Link here:</p><p id="-1102085553#-kwdgyz_4">Volume Project (<a href="https://github.com/joe6276/Kubernetes-101/tree/master/Kubernetes%20Projects/2.%20Kubernetes-Data">https://github.com/joe6276/Kubernetes-101/tree/master/Kubernetes%20Projects/2.%20Kubernetes-Data</a>)</p><section><h2 id="-1102085553#problem" data-toc="problem#kub-volume.md-problem">Problem</h2><p id="-1102085553#-kwdgyz_9">The above project has a student folder which stores students that are added after executing the post endpoint. You can also get all the student by executing the get endpoint.</p><p id="-1102085553#-kwdgyz_10">But when we run this in a pod and for one reason or another an error occurs (e.g. executing the error endpoint which crashes the app) , a new pod will be created and all the previous data will be lost.</p><p id="-1102085553#-kwdgyz_11">This is what we will be solving: <span class="control" id="-1102085553#-kwdgyz_12">persisting Data</span></p></section><section><h2 id="-1102085553#emptydir" data-toc="emptydir#kub-volume.md-emptydir">EmptyDir</h2><p id="-1102085553#-kwdgyz_13">For a Pod that defines an emptyDir volume, the volume is created when the Pod is assigned to a node. As the name says, the emptyDir volume is initially empty. All containers in the Pod can read and write the same files in the emptyDir volume, though that volume can be mounted at the same or different paths in each container. When a Pod is removed from a node for any reason, the data in the emptyDir is deleted permanently.</p><p id="-1102085553#-kwdgyz_14">A container crashing does not remove a Pod from a node. The data in an emptyDir volume is safe across container crashes.</p><p id="-1102085553#-kwdgyz_15">Here is the Dockerfile that will will be built to create an image:</p><div class="detached code-block" id="-1102085553#-kwdgyz_16"><pre><code class="language-dockerfile">FROM node:22-alpine

WORKDIR /app

COPY package*.json /app

RUN npm install

COPY . .

EXPOSE 80

CMD [ &quot;npm&quot;,&quot;start&quot; ]</code></pre></div><p id="-1102085553#-kwdgyz_17">Let's start by creating a Service:</p><div class="detached code-block" id="-1102085553#-kwdgyz_18"><pre><code class="language-dockerfile">apiVersion: v1
kind: Service
metadata: 
  name: volume-service
spec:
  selector:
    app: volumes
  ports:
    - protocol: 'TCP'
      port: 80
      targetPort: 80
  type: LoadBalancer</code></pre></div><p id="-1102085553#-kwdgyz_19">Then a Deployment:</p><div class="detached code-block" id="-1102085553#-kwdgyz_20"><pre><code class="language-dockerfile">apiVersion: apps/v1
kind: Deployment
metadata:
  name: volume-object
spec:
  replicas: 1
  selector:
    matchLabels:
      app: volumes
  template:
    metadata:
      labels:
        app: volumes
    spec:
      containers:
        - name: volumes-container
          image: ndambuki/kub-volume-demo
          volumeMounts:
            - mountPath: /app/students
              name: student-volume
      volumes:
        - name: student-volume
          emptyDir: {}</code></pre></div><p id="-1102085553#-kwdgyz_21">Lets understand the Volume part:</p><div class="detached code-block" id="-1102085553#-kwdgyz_22"><pre><code class="language-dockerfile">spec:
      containers:
        - name: volumes-container
          image: ndambuki/kub-volume-demo
          volumeMounts:
            - mountPath: /app/students
              name: student-volume
      volumes:
        - name: student-volume
          emptyDir: {}</code></pre></div></section><section><h2 id="-1102085553#explanation" data-toc="explanation#kub-volume.md-explanation">Explanation</h2><section><h3 id="-1102085553#volumemounts" data-toc="volumemounts#kub-volume.md-volumemounts">volumeMounts:</h3><p id="-1102085553#-kwdgyz_25">Defines how the container will use volumes by mounting them to specific paths inside the container. <span class="control" id="-1102085553#-kwdgyz_26">mountPath: /app/students:</span> This specifies the directory inside the container where the volume will be mounted. name: student-volume: Refers to the volume that will be mounted at /app/students. - the app id the work directory defined in the image.</p></section><section><h3 id="-1102085553#volumes" data-toc="volumes#kub-volume.md-volumes">volumes:</h3><p id="-1102085553#-kwdgyz_27">Defines the volumes that will be available to the pod. These volumes can be of different types, such as emptyDir,hostPath, persistentVolumeClaim, etc. name: student-volume: The name of the volume that matches the volumeMount definition above.</p><p id="-1102085553#-kwdgyz_28"><span class="control" id="-1102085553#-kwdgyz_48">emptyDir: {}</span>: This creates an emptyDir volume, which is a temporary directory that initially starts empty. It exists as long as the pod is running, and when the pod is deleted, the data in the emptyDir is lost. It's typically used for temporary data storage during pod execution.</p><p id="-1102085553#-kwdgyz_29">Now lets create the deployments:</p><div class="detached code-block" id="-1102085553#-kwdgyz_30"><pre><code class="language-dockerfile">kubectl apply -f service.yaml -f deployment.yaml</code></pre></div><p id="-1102085553#-kwdgyz_31">Start the service:</p><div class="detached code-block" id="-1102085553#-kwdgyz_32"><pre><code class="language-dockerfile">minikube service volume-service</code></pre></div><p id="-1102085553#-kwdgyz_33">Now lets test it using PostMan:</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1102085553#-kwdgyz_34" alt="image_20.png" title="image_20.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_20.png" width="1304" height="811"><figcaption class="center-text">image_20.png</figcaption></figure></div><p id="-1102085553#-kwdgyz_35">As you can see the student was stored Successful and we can confirm by executing the get endpoint. <div class="container"><figure class="image-container"><img class="center image image-size" id="-1102085553#-kwdgyz_49" alt="image_21.png" title="image_21.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_21.png" width="1317" height="796"><figcaption class="center-text">image_21.png</figcaption></figure></div></p><p id="-1102085553#-kwdgyz_36">Now lets crash the app , which will force a new container to be created.</p><p id="-1102085553#-kwdgyz_37">execute the error endpoint <div class="container"><figure class="image-container"><img class="center image image-size" id="-1102085553#-kwdgyz_50" alt="image_23.png" title="image_23.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_23.png" width="1256" height="368"><figcaption class="center-text">image_23.png</figcaption></figure></div></p><p id="-1102085553#-kwdgyz_38">on your dashboard you should see the container stopping and a new one will start.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1102085553#-kwdgyz_39" alt="image_22.png" title="image_22.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_22.png" width="1586" height="186"><figcaption class="center-text">image_22.png</figcaption></figure></div><div class="container"><figure class="image-container"><img class="center image image-size" id="-1102085553#-kwdgyz_40" alt="image_24.png" title="image_24.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_24.png" width="1573" height="205"><figcaption class="center-text">image_24.png</figcaption></figure></div><blockquote class="prompt flex bordered-element-rounded tip detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p id="-1102085553#-kwdgyz_51">Our data still exists because EmptyDir will maintain the data despite container crashing</p></div>
</blockquote>
<p id="-1102085553#-kwdgyz_42">Now lets start two pods, modify the replica and re-apply the deployment.</p><div class="detached code-block" id="-1102085553#-kwdgyz_43"><pre><code class="language-dockerfile">spec:
   replicas: 2</code></pre></div><p id="-1102085553#-kwdgyz_44">You should see the two pods in your dashboard: <div class="container"><figure class="image-container"><img class="center image image-size" id="-1102085553#-kwdgyz_52" alt="image_25.png" title="image_25.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_25.png" width="1586" height="265"><figcaption class="center-text">image_25.png</figcaption></figure></div></p><p id="-1102085553#-kwdgyz_45">Now lets crash one which will force the new request to be forwarded to the active pod. Your dashboard should look like this (for some few seconds before the container is recreated) <div class="container"><figure class="image-container"><img class="center image image-size" id="-1102085553#-kwdgyz_53" alt="image_26.png" title="image_26.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_26.png" width="1624" height="328"><figcaption class="center-text">image_26.png</figcaption></figure></div></p><p id="-1102085553#-kwdgyz_46">If you now try getting students the request, it will be forwarded to the new pod created and it will fail: <div class="container"><figure class="image-container"><img class="center image image-size" id="-1102085553#-kwdgyz_54" alt="image_27.png" title="image_27.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_27.png" width="1271" height="726"><figcaption class="center-text">image_27.png</figcaption></figure></div></p><blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>EmptyDir is good when using one pod , but when you scale up to two pods it will fail.</p></div>
</blockquote>
</section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-135891499">Host Path Volume</h1><p id="-135891499#-1m6urz_3">We saw that EmptyDir is pod dependent and we need a solution to that which is Host-path volume</p><section><h2 id="-135891499#hostpath" data-toc="hostpath#kub-host-path.md-hostpath">hostPath</h2><p id="-135891499#-1m6urz_5">A hostPath volume mounts a file or directory from the host node's filesystem into your Pod. This is not something that most Pods will need, but it offers a powerful escape hatch for some applications.</p><p id="-135891499#-1m6urz_6">We are only going to change the volume configuration:</p><div class="detached code-block" id="-135891499#-1m6urz_7"><pre><code class="language-dockerfile">volumes:
     - name: student-volume
       hostPath:
         path: /data
         type: DirectoryOrCreate</code></pre></div><section><h3 id="-135891499#hostpath_1" data-toc="hostpath_1#kub-host-path.md-hostpath_1">hostPath:</h3><p id="-135891499#-1m6urz_11">Specifies that this volume type is a hostPath, meaning it will use a directory or file from the host (the node running the pod) and mount it into the container.</p></section><section><h3 id="-135891499#path-data" data-toc="path-data#kub-host-path.md-path-data">path: /data</h3><p id="-135891499#-1m6urz_12">This is the path on the host machine's filesystem that will be mounted into the container. In this case, it's /data. For example, if /data already exists on the host, it will be mounted into the container's filesystem at the corresponding mountPath defined in the container's configuration.</p></section><section><h3 id="-135891499#type-directoryorcreate" data-toc="type-directoryorcreate#kub-host-path.md-type-directoryorcreate">type: DirectoryOrCreate</h3><p id="-135891499#-1m6urz_13">The type field describes how Kubernetes should handle the directory at the specified path. <span class="control" id="-135891499#-1m6urz_18">DirectoryOrCreate</span>: If the directory /data does not already exist on the host, Kubernetes will create it automatically. If the directory does exist, Kubernetes will use it as is. The directory will persist on the host node even after the pod is deleted.</p><p id="-135891499#-1m6urz_14">now apply the changes</p><div class="detached code-block" id="-135891499#-1m6urz_15"><pre><code class="language-dockerfile">kubectl apply -f deployment.yaml</code></pre></div><blockquote class="prompt flex bordered-element-rounded tip detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>This solves the previous problem with pods</p></div>
</blockquote>
<blockquote class="prompt flex bordered-element-rounded warning detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>This volume however runs on one node only in a case where we are using different nodes (cloud) it might not be the best solution</p></div>
</blockquote>
</section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="833699003">Persistent Volume</h1><p id="833699003#-oyerjp_3">So far all the volumes we have interacted with are pod or node dependent. That means when you have new pods or nodes the volume won't work in the new pods or nodes. We need to create a volume at the cluster level, this will all pods and nodes in the cluster to access this volume. This is where persistent volume comes in.</p><p id="833699003#-oyerjp_4">Persistent Volumes are Kubernetes objects that represent storage resources in your cluster. PVs work in conjunction with Persistent Volume Claims (PVCs), another type of object which permits Pods to request access to PVs.</p><p id="833699003#-oyerjp_5">We will still use hostPath because we are using minikube and it has only one node.</p><div class="detached code-block" id="833699003#-oyerjp_6"><pre><code class="language-dockerfile">apiVersion: v1
kind: PersistentVolume
metadata:
  name: students-pv
spec:
  capacity:
    storage: 1Gi
  volumeMode: Filesystem
  storageClassName: standard
  accessModes: 
    - ReadWriteOnce
  hostPath:
    path: /data
    type: DirectoryOrCreate</code></pre></div><section><h2 id="833699003#apiversion-v1" data-toc="apiversion-v1#kub-persistent-volume.md-apiversion-v1">apiVersion: v1</h2><p id="833699003#-oyerjp_16">Specifies the version of the Kubernetes API you're using. In this case, it's v1, used for resources like PersistentVolume.</p></section><section><h2 id="833699003#kind-persistentvolume" data-toc="kind-persistentvolume#kub-persistent-volume.md-kind-persistentvolume">kind: PersistentVolume</h2><p id="833699003#-oyerjp_17">The kind field indicates that you're creating a PersistentVolume (PV). A PV is a piece of storage in the cluster that has been provisioned by an administrator or dynamically by a storage class. Pods can claim PVs to store data persistently.</p></section><section><h2 id="833699003#metadata" data-toc="metadata#kub-persistent-volume.md-metadata">metadata:</h2><p id="833699003#-oyerjp_18">Contains metadata for the PersistentVolume. <span class="control" id="833699003#-oyerjp_19"><span class="emphasis" id="833699003#-oyerjp_20">name: host-pv</span></span>: This assigns a name to the PersistentVolume, in this case, host-pv. . spec: Defines the specification for the PersistentVolume, including the storage capacity, access modes, and volume source.</p></section><section><h2 id="833699003#capacity" data-toc="capacity#kub-persistent-volume.md-capacity">capacity:</h2><p id="833699003#-oyerjp_21">Specifies the size of the storage that the PersistentVolume provides.</p><div class="detached code-block" id="833699003#-oyerjp_22"><pre><code class="language-dockerfile">capacity:
 storage: 1Gi</code></pre></div><p id="833699003#-oyerjp_23"><span class="control" id="833699003#-oyerjp_24">storage: 1Gi:</span> This indicates that the PersistentVolume has a storage capacity of 1 GiB .</p></section><section><h2 id="833699003#volumemode-filesystem" data-toc="volumemode-filesystem#kub-persistent-volume.md-volumemode-filesystem">volumeMode: Filesystem</h2><p id="833699003#-oyerjp_25">Defines the type of volume mode. Filesystem: This means that the volume will be mounted as a filesystem, where data can be written and read like any normal filesystem. The alternative would be Block, which gives raw block storage access.</p></section><section><h2 id="833699003#storageclassname-standard" data-toc="storageclassname-standard#kub-persistent-volume.md-storageclassname-standard">storageClassName: standard</h2><p id="833699003#-oyerjp_26">Specifies the storage class associated with this PersistentVolume. <span class="control" id="833699003#-oyerjp_27">standard</span>: This binds the PersistentVolume to a specific StorageClass. In this case, it's using a standard storage class (which could be predefined or custom in your cluster). If a PersistentVolumeClaim (PVC) uses this storage class, it can claim this PV</p></section><section><h2 id="833699003#accessmodes" data-toc="accessmodes#kub-persistent-volume.md-accessmodes">accessModes:</h2><p id="833699003#-oyerjp_28">Specifies how the volume can be mounted by pods. ReadWriteOnce: This means the volume can be mounted as read-write by a single node at a time. Only one pod can write to this volume, but multiple pods can read from it if they are on the same node.</p></section><section><h2 id="833699003#hostpath" data-toc="hostpath#kub-persistent-volume.md-hostpath">hostPath:</h2><p id="833699003#-oyerjp_29">Defines the backing storage for the PersistentVolume. Here, it uses the hostPath volume type <span class="control" id="833699003#-oyerjp_32">path: /data:</span> This specifies the directory on the host machine's filesystem that will back the PersistentVolume. In this case, it's /data.</p><p id="833699003#-oyerjp_30"><span class="control" id="833699003#-oyerjp_33">type: DirectoryOrCreate</span>: This ensures that if the /data directory doesn't exist on the host, it will be created automatically. If the directory exists, it will be used as is.</p><p id="833699003#-oyerjp_31">To connect to the volume we need PersistentVolumeClaim</p></section><section><h2 id="833699003#persistent-volumeclaim" data-toc="persistent-volumeclaim#kub-persistent-volume.md-persistent-volumeclaim">Persistent VolumeClaim</h2><p id="833699003#-oyerjp_34">Persistent Volume Claims are requests for storage made by a pod in the cluster. They allow pods to consume storage without needing to know the specifics of how it is provisioned</p><p id="833699003#-oyerjp_35">Let's create one that consumes the above volume</p><div class="detached code-block" id="833699003#-oyerjp_36"><pre><code class="language-dockerfile">apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: students-pvc
spec:
  volumeName: students-pv
  accessModes:
  - ReadWriteOnce
  storageClassName: standard
  resources:
    requests:
      storage: 1Gi</code></pre></div><section><h3 id="833699003#apiversion-v1_1" data-toc="apiversion-v1_1#kub-persistent-volume.md-apiversion-v1_1">apiVersion: v1</h3><p id="833699003#-oyerjp_45">Specifies the version of the Kubernetes API being used. v1 is the appropriate API version for PersistentVolumeClaims.</p></section><section><h3 id="833699003#kind-persistentvolumeclaim" data-toc="kind-persistentvolumeclaim#kub-persistent-volume.md-kind-persistentvolumeclaim">kind: PersistentVolumeClaim</h3><p id="833699003#-oyerjp_46">The kind field indicates that you're creating a PersistentVolumeClaim (PVC). A PVC allows you to request storage from the cluster and bind it to a specific pod.</p></section><section><h3 id="833699003#metadata_1" data-toc="metadata_1#kub-persistent-volume.md-metadata_1">metadata:</h3><p id="833699003#-oyerjp_47">Contains metadata for the PersistentVolumeClaim. <span class="control" id="833699003#-oyerjp_48">name: host-pvc</span>: This gives the PersistentVolumeClaim a unique name, in this case, host-pvc</p></section><section><h3 id="833699003#spec" data-toc="spec#kub-persistent-volume.md-spec">spec:</h3><p id="833699003#-oyerjp_49">Defines the specification of the PersistentVolumeClaim, including the access mode, storage request, and volume binding.</p></section><section><h3 id="833699003#volumename-host-pv" data-toc="volumename-host-pv#kub-persistent-volume.md-volumename-host-pv">volumeName: host-pv</h3><p id="833699003#-oyerjp_50">This field explicitly binds the PersistentVolumeClaim to a specific PersistentVolume by name. <span class="control" id="833699003#-oyerjp_51">volumeName: host-pv:</span> The PVC will bind to the PersistentVolume named host-pv. This is useful when you have a statically provisioned PersistentVolume that you want to use directly with this claim</p></section><section><h3 id="833699003#accessmodes_1" data-toc="accessmodes_1#kub-persistent-volume.md-accessmodes_1">accessModes:</h3><p id="833699003#-oyerjp_52">Defines the access modes for the claim, specifying how the volume can be mounted. ReadWriteOnce: This means the volume can be mounted as read-write by a single node at a time. The volume can be accessed by only one pod in read-write mode, but if the pod is terminated, another pod can then access it.</p></section><section><h3 id="833699003#storageclassname-standard_1" data-toc="storageclassname-standard_1#kub-persistent-volume.md-storageclassname-standard_1">storageClassName: standard</h3><p id="833699003#-oyerjp_53">Specifies the StorageClass to be used for dynamic provisioning or matching against statically provisioned volumes.</p><p id="833699003#-oyerjp_54"><span class="control" id="833699003#-oyerjp_55">storageClassName: standard:</span> The PVC will look for a PersistentVolume that matches the standard storage class. This must match the storage class defined in the PersistentVolume.</p></section><section><h3 id="833699003#resources" data-toc="resources#kub-persistent-volume.md-resources">resources:</h3><p id="833699003#-oyerjp_56">Specifies the resource requests, such as the amount of storage needed.</p><p id="833699003#-oyerjp_57"><span class="control" id="833699003#-oyerjp_64">requests: storage: 1Gi:</span> The PVC is requesting 1 GiB of storage. This must match the capacity of the PersistentVolume to be bound</p><p id="833699003#-oyerjp_58">In the Deployment file change this</p><div class="detached code-block" id="833699003#-oyerjp_59"><pre><code class="language-dockerfile">volumes:
    - name: student-volume
      persistentVolumeClaim:
        claimName: students-pvc</code></pre></div><p id="833699003#-oyerjp_60">This connects the pod to the persistent volume claim</p><p id="833699003#-oyerjp_61">Now Apply the changes</p><div class="detached code-block" id="833699003#-oyerjp_62"><pre><code class="language-dockerfile">kubectl apply -f host-pv.yaml -f host-pvc.yaml -f deployment.yaml</code></pre></div><p id="833699003#-oyerjp_63">The application should now run well .</p></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1817595902">Environment Variables</h1><p id="1817595902#nj5i20_3">Now let's check how to configure environment variables</p><p id="1817595902#nj5i20_4">First I will make the folderName to be read from the environment,</p><div class="detached code-block" id="1817595902#nj5i20_5"><pre><code class="language-javascript">const filePath = path.join(__dirname, process.env.FOLDER_NAME, 'text.txt')</code></pre></div><p id="1817595902#nj5i20_6">Now we have to pass a value for FOLDER_NAME</p><div class="detached code-block" id="1817595902#nj5i20_7"><pre><code class="language-dockerfile">spec:
   containers:
     - name: volumes-container
       image: ndambuki/kub-volume-demo
       env:
         - name: FOLDER_NAME
           value: 'students'</code></pre></div><p id="1817595902#nj5i20_8">so we will pass key value pairs where the kwy will be FOLDER_NAME and the value the name of the folder you want to use.</p><section><h2 id="1817595902#configmaps" data-toc="configmaps#kub-environment.md-configmaps">ConfigMaps</h2><section><h3 id="1817595902#apiversion-v1" data-toc="apiversion-v1#kub-environment.md-apiversion-v1">apiVersion: v1</h3><p id="1817595902#nj5i20_16">Specifies the version of the Kubernetes API you're using. v1 is used for basic Kubernetes resources, such as ConfigMap.</p></section><section><h3 id="1817595902#kind-configmap" data-toc="kind-configmap#kub-environment.md-kind-configmap">kind: ConfigMap</h3><p id="1817595902#nj5i20_17">The kind field indicates that this resource is a ConfigMap. A ConfigMap is used to store configuration data that can be shared among different pods or services within your Kubernetes cluster.</p></section><section><h3 id="1817595902#metadata" data-toc="metadata#kub-environment.md-metadata">metadata:</h3><p id="1817595902#nj5i20_18">Contains metadata, such as the name of the ConfigMap. <span class="control" id="1817595902#nj5i20_19">name: data-store-env</span>: This gives the ConfigMap a unique name, which can be referenced by pods or other resources that need the configuration.</p></section><section><h3 id="1817595902#data" data-toc="data#kub-environment.md-data">data:</h3><p id="1817595902#nj5i20_20">The data section stores the key-value pairs of the configuration data. <span class="control" id="1817595902#nj5i20_23">folder: 'students':</span> This defines a key-value pair within the ConfigMap. The key is folder, and the value is 'students'.</p><p id="1817595902#nj5i20_21">This data can be injected into pods as environment variables or configuration files. For example, you could mount this ConfigMap into a pod, and the application inside the pod could read the value of the folder variable ('students').</p><div class="detached code-block" id="1817595902#nj5i20_22"><pre><code class="language-dockerfile">- name: FOLDER_NAME
   valueFrom:
      configMapKeyRef: 
         name: data-store-env
         key: folder</code></pre></div></section><section><h3 id="1817595902#valuefrom" data-toc="valuefrom#kub-environment.md-valuefrom">valueFrom:</h3><p id="1817595902#nj5i20_24">This indicates that the value of the environment variable will be sourced from an external resource, such as a ConfigMap or a Secret.</p></section><section><h3 id="1817595902#configmapkeyref" data-toc="configmapkeyref#kub-environment.md-configmapkeyref">configMapKeyRef:</h3><p id="1817595902#nj5i20_25">This specifies that the value will come from a ConfigMap <span class="control" id="1817595902#nj5i20_26">name: data-store-env:</span> This specifies the name of the ConfigMap from which the value will be fetched. In this case, it is data-store-env. <span class="control" id="1817595902#nj5i20_27">key: folder:</span> This specifies the key inside the ConfigMap whose value you want to retrieve. In this case, it's the key folder, which has the value 'students'.</p></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1799937961">Kubernetes Networking</h1><p id="1799937961#z499rqz_3">When you have a full-stack application you need the frontend and the backend to communicate with each other, you also need the backend to communicate with your database.</p><p id="1799937961#z499rqz_4">For example if running an MSSQL the backend need a server name. In Docker you use the database container name as the server name. In kubernetes things are different lets check different scenarios :</p><p id="1799937961#z499rqz_5">Attached Here is a Project: https://github.com/joe6276/Kubernetes-101/tree/master/Kubernetes%20Projects/3.%20Kubernetes-%20Networking</p><section><h2 id="1799937961#about-the-project" data-toc="about-the-project#kub-networking.md-about-the-project">About the Project</h2><p id="1799937961#z499rqz_11">The project has two API auth and users . The users API needs to communicate to the Auth API in order to get back a hashed password( its simulated - not real) But let's focus on the communication part.</p></section><section><h2 id="1799937961#pod-internal-communication" data-toc="pod-internal-communication#kub-networking.md-pod-internal-communication">Pod Internal Communication</h2><p id="1799937961#z499rqz_12">We will start by placing both containers in the same pod. When two containers are in the same pod you can use localhost because they are running on the same machine. Here is an example of the deployment.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="1799937961#z499rqz_13" alt="dsa.jpg" title="dsa.jpg" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/dsa.jpg" width="631" height="341"><figcaption class="center-text">dsa.jpg</figcaption></figure></div><section><h3 id="1799937961#user-service" data-toc="user-service#kub-networking.md-user-service">user Service</h3><div class="detached code-block" id="1799937961#z499rqz_16"><pre><code class="language-dockerfile">apiVersion: v1
kind: Service
metadata: 
  name: user-service
spec:
  selector:
    app: user
  ports:
    - protocol: 'TCP'
      port: 3000
      targetPort: 3000
  type: LoadBalancer</code></pre></div></section><section><h3 id="1799937961#user-deployment" data-toc="user-deployment#kub-networking.md-user-deployment">User Deployment</h3><div class="detached code-block" id="1799937961#z499rqz_17"><pre><code class="language-dockerfile">apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: user
  template:
    metadata:
      labels:
        app: user
    spec:
      containers:
        - name: users-api
          image: ndambuki/kubernetes-user-api:latest
          env:
            - name: AUTH_ADDRESS
              value: localhost
        - name: users-auth
          image: ndambuki/kubernetes-auth-api:latest</code></pre></div><p id="1799937961#z499rqz_18">The deployment has two container and I'm passing AUTH_ADDRESS as an environment variable. which is being used at the User API</p><div class="detached code-block" id="1799937961#z499rqz_19"><pre><code class="language-javascript">const response = await axios.get(`http://${process.env.AUTH_ADDRESS}/hash/${password}`);</code></pre></div><p id="1799937961#z499rqz_20">Now start the service with:</p><div class="detached code-block" id="1799937961#z499rqz_21"><pre><code class="language-dockerfile">minikube service user-service</code></pre></div><p id="1799937961#z499rqz_22">The Project Works Well <div class="container"><figure class="image-container"><img class="center image image-size" id="1799937961#z499rqz_24" alt="image_52.png" title="image_52.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_52.png" width="1306" height="778"><figcaption class="center-text">image_52.png</figcaption></figure></div></p><p id="1799937961#z499rqz_23">But sometimes you have the containers on different pods.</p></section></section><section><h2 id="1799937961#pod-to-pod-communication" data-toc="pod-to-pod-communication#kub-networking.md-pod-to-pod-communication">Pod to Pod Communication</h2><section><h3 id="1799937961#auth-service-ip-address" data-toc="auth-service-ip-address#kub-networking.md-auth-service-ip-address">Auth-Service IP Address</h3><div class="container"><figure class="image-container"><img class="center image image-size" id="1799937961#z499rqz_29" alt="dsa1.jpg" title="dsa1.jpg" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/dsa1.jpg" width="631" height="341"><figcaption class="center-text">dsa1.jpg</figcaption></figure></div><p id="1799937961#z499rqz_30">Now let's create two deployments and two services:</p></section><section><h3 id="1799937961#auth-service" data-toc="auth-service#kub-networking.md-auth-service">Auth Service</h3><div class="detached code-block" id="1799937961#z499rqz_31"><pre><code class="language-dockerfile">apiVersion: v1
kind: Service
metadata: 
  name: auth-service
spec:
  selector:
    app: auth
  ports:
    - protocol: 'TCP'
      port: 80
      targetPort: 80
  type: ClusterIP</code></pre></div><p id="1799937961#z499rqz_32">Here I used ClusterIP which means that this service won't be accessed from the outside can only be accessed by pods in the same cluster.</p></section><section><h3 id="1799937961#auth-deployment" data-toc="auth-deployment#kub-networking.md-auth-deployment">Auth Deployment</h3><div class="detached code-block" id="1799937961#z499rqz_33"><pre><code class="language-dockerfile">apiVersion: apps/v1
kind: Deployment
metadata:
  name: auth-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: auth
  template:
    metadata:
      labels:
        app: auth
    spec:
      containers:
        - name: auth-api
          image: ndambuki/kubernetes-auth-api:latest</code></pre></div><p id="1799937961#z499rqz_34">Before running the User Deployment lets first get the IP address of the AUTH Service. Run:</p><div class="detached code-block" id="1799937961#z499rqz_35"><pre><code class="language-dockerfile">kubectl get services</code></pre></div><p id="1799937961#z499rqz_36">: <div class="container"><figure class="image-container"><img class="center image image-size" id="1799937961#z499rqz_38" alt="image_53.png" title="image_53.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_53.png" width="615" height="87"><figcaption class="center-text">image_53.png</figcaption></figure></div></p><p id="1799937961#z499rqz_37">Use the ClusterIP as the AUTH_ADDRESS of the User deployment.</p></section><section><h3 id="1799937961#user-deployment_1" data-toc="user-deployment_1#kub-networking.md-user-deployment_1">User Deployment</h3><div class="detached code-block" id="1799937961#z499rqz_39"><pre><code class="language-dockerfile">apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: user
  template:
    metadata:
      labels:
        app: user
    spec:
      containers:
        - name: users-api
          image: ndambuki/kubernetes-user-api:latest
          env:
            - name: AUTH_ADDRESS
              value: &quot;10.108.196.53&quot;</code></pre></div><p id="1799937961#z499rqz_40">The User Service remains the same .</p><p id="1799937961#z499rqz_41">now apply all the changes</p><div class="detached code-block" id="1799937961#z499rqz_42"><pre><code class="language-dockerfile">kubectl apply -f user.yaml -f user-service.yaml -f auth.yaml -f auth-service.yaml</code></pre></div><p id="1799937961#z499rqz_43">The application will still Work <div class="container"><figure class="image-container"><img class="center image image-size" id="1799937961#z499rqz_44" alt="image_54.png" title="image_54.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_54.png" width="1281" height="780"><figcaption class="center-text">image_54.png</figcaption></figure></div> But that's a lot of manual work , in terms getting the IP addresses.</p></section></section><section><h2 id="1799937961#dns-for-services-and-pods" data-toc="dns-for-services-and-pods#kub-networking.md-dns-for-services-and-pods">DNS for Services and Pods</h2><p id="1799937961#z499rqz_45">Kubernetes creates DNS records for Services and Pods. You can contact Services with consistent DNS names instead of IP addresses.</p><p id="1799937961#z499rqz_46">Kubernetes publishes information about Pods and Services which is used to program DNS. Kubelet configures Pods' DNS so that running containers can lookup Services by name rather than IP.</p><p id="1799937961#z499rqz_47">Services defined in the cluster are assigned DNS names. By default, a client Pod's DNS search list includes the Pod's own namespace and the cluster's default domain.</p><p id="1799937961#z499rqz_48">Cluster by default come with coreDNS which gives us cluster internal domain name for our services. Here you use: &lt;service_Name&gt;. </p><p id="1799937961#z499rqz_49">Namespace is a way of grouping your services. By default we use the 'default' namespace unless defined.</p><div class="detached code-block" id="1799937961#z499rqz_50"><pre><code class="language-dockerfile">spec:
  containers:
    - name: users-api
      image: ndambuki/kubernetes-user-api:latest
      env:
        - name: AUTH_ADDRESS
          value: &quot;auth-service.default&quot;</code></pre></div><p id="1799937961#z499rqz_51">We will just change the value of the AUTH_ADDRESS.</p><p id="1799937961#z499rqz_52">The API still works <div class="container"><figure class="image-container"><img class="center image image-size" id="1799937961#z499rqz_54" alt="image_55.png" title="image_55.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_55.png" width="1297" height="811"><figcaption class="center-text">image_55.png</figcaption></figure></div></p></section><section><h2 id="1799937961#special-environment-variables" data-toc="special-environment-variables#kub-networking.md-special-environment-variables">Special Environment Variables</h2><p id="1799937961#z499rqz_55">There a certain pattern of writing environment variable that is recognized by kubernetes.</p><div class="detached code-block" id="1799937961#z499rqz_56"><pre><code class="language-dockerfile">const response = await axios.get(`http://${process.env.AUTH_SERVICE_SERVICE_HOST}/hash/${password}`);</code></pre></div><p id="1799937961#z499rqz_57">This pattern has:</p><div class="detached code-block" id="1799937961#z499rqz_58"><pre><code class="language-dockerfile">&lt;SERVICE_NAME&gt;_SERVICE_HOST</code></pre></div><p id="1799937961#z499rqz_59">Even our User service will have the same.</p></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-77286534">Deployment</h1><p id="-77286534#ag2tze_3">In this module we will be deploying a Full-stack application to an EKS.</p><section><h2 id="-77286534#eks" data-toc="eks#kub-deployment.md-eks">EKS</h2><p id="-77286534#ag2tze_14">Amazon Elastic Kubernetes Service (Amazon EKS) is a managed Kubernetes service that makes it easy for you to run Kubernetes on AWS and on-premises.</p><p id="-77286534#ag2tze_15">But before we dive into deployment . Lets look at the role we play and what kubernetes will help with</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_16" alt="image_28.png" title="image_28.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_28.png" width="1497" height="751"><figcaption class="center-text">image_28.png</figcaption></figure></div><p id="-77286534#ag2tze_17">we will start with the database and backend app which can be found at: https://github.com/joe6276/Kubernetes-101/tree/master/Kubernetes%20Projects/4.%20Kubernetes-%20Deployment</p><p id="-77286534#ag2tze_18">First we will create a Cluster at AWS</p></section><section><h2 id="-77286534#search-and-click-on-eks" data-toc="search-and-click-on-eks#kub-deployment.md-search-and-click-on-eks">Search and Click on EKS</h2><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_19" alt="image_29.png" title="image_29.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_29.png" width="1528" height="660"><figcaption class="center-text">image_29.png</figcaption></figure></div><p id="-77286534#ag2tze_20">Then Click on add Cluster - Enter the Cluster Name <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_25" alt="image_30.png" title="image_30.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_30.png" width="1417" height="526"><figcaption class="center-text">image_30.png</figcaption></figure></div></p><p id="-77286534#ag2tze_21">Then we need to give Kubernetes some permissions. so click on create a role</p><section><h3 id="-77286534#on-select-trusted-entity" data-toc="on-select-trusted-entity#kub-deployment.md-on-select-trusted-entity">On select trusted entity</h3><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_26" alt="image_31.png" title="image_31.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_31.png" width="1678" height="838"><figcaption class="center-text">image_31.png</figcaption></figure></div><p id="-77286534#ag2tze_27">Leave the defaults and click on next</p></section><section><h3 id="-77286534#add-permissions" data-toc="add-permissions#kub-deployment.md-add-permissions">Add Permissions</h3><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_28" alt="image_32.png" title="image_32.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_32.png" width="1554" height="462"><figcaption class="center-text">image_32.png</figcaption></figure></div><p id="-77286534#ag2tze_29">Here we need the Eks Cluster policy</p></section><section><h3 id="-77286534#name-review-and-create" data-toc="name-review-and-create#kub-deployment.md-name-review-and-create">Name Review and Create</h3><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_30" alt="image_33.png" title="image_33.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_33.png" width="1533" height="820"><figcaption class="center-text">image_33.png</figcaption></figure></div><p id="-77286534#ag2tze_31">give it a name and review the rest</p><p id="-77286534#ag2tze_32">Then create the role</p><p id="-77286534#ag2tze_33">Now use the role we have created: <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_35" alt="image_34.png" title="image_34.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_34.png" width="831" height="190"><figcaption class="center-text">image_34.png</figcaption></figure></div></p><p id="-77286534#ag2tze_34">Click on next</p></section></section><section><h2 id="-77286534#cluster-networking" data-toc="cluster-networking#kub-deployment.md-cluster-networking">Cluster Networking</h2><p id="-77286534#ag2tze_36">on the VPC duplicate the Tab and on your AWS Search Cloud Formation</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_37" alt="image_35.png" title="image_35.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_35.png" width="1806" height="505"><figcaption class="center-text">image_35.png</figcaption></figure></div><p id="-77286534#ag2tze_38">click on create stack</p><p id="-77286534#ag2tze_39">Paste this link on the Amazon S3 URL : https://s3.us-west-2.amazonaws.com/amazon-eks/cloudformation/2020-10-29/amazon-eks-vpc-private-subnets.yaml <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_45" alt="image_36.png" title="image_36.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_36.png" width="1552" height="768"><figcaption class="center-text">image_36.png</figcaption></figure></div></p><p id="-77286534#ag2tze_40">click on Next <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_46" alt="image_37.png" title="image_37.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_37.png" width="1503" height="195"><figcaption class="center-text">image_37.png</figcaption></figure></div> give it a name</p><p id="-77286534#ag2tze_41">For the next pages leave the defaults and submit to create the VPC.</p><p id="-77286534#ag2tze_42">Once the VPC is created: <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_47" alt="image_38.png" title="image_38.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_38.png" width="1591" height="351"><figcaption class="center-text">image_38.png</figcaption></figure></div></p><p id="-77286534#ag2tze_43">Back to the Cluster page select It: <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_48" alt="image_39.png" title="image_39.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_39.png" width="867" height="798"><figcaption class="center-text">image_39.png</figcaption></figure></div></p><p id="-77286534#ag2tze_44">For the other pages leave the defaults as they are then create the cluster</p></section><section><h2 id="-77286534#creating-worker-nodes" data-toc="creating-worker-nodes#kub-deployment.md-creating-worker-nodes">Creating Worker Nodes</h2><p id="-77286534#ag2tze_49">Now let create a worker node: <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_54" alt="image_40.png" title="image_40.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_40.png" width="1540" height="574"><figcaption class="center-text">image_40.png</figcaption></figure></div></p><p id="-77286534#ag2tze_50">click on compute: <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_55" alt="image_41.png" title="image_41.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_41.png" width="907" height="250"><figcaption class="center-text">image_41.png</figcaption></figure></div> Give it a name</p><p id="-77286534#ag2tze_51">On the Role part click on create role in IAM console:</p><section><h3 id="-77286534#select-trusted-entity" data-toc="select-trusted-entity#kub-deployment.md-select-trusted-entity">select trusted entity</h3><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_56" alt="image_42.png" title="image_42.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_42.png" width="1527" height="819"><figcaption class="center-text">image_42.png</figcaption></figure></div></section><section><h3 id="-77286534#add-permissions_1" data-toc="add-permissions_1#kub-deployment.md-add-permissions_1">Add permissions</h3><p id="-77286534#ag2tze_57">Then select these 3 permissions Add the newly created role:</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_58" alt="image_43.png" title="image_43.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_43.png" width="997" height="757"><figcaption class="center-text">image_43.png</figcaption></figure></div></section></section><section><h2 id="-77286534#compute-and-scaling-configuration" data-toc="compute-and-scaling-configuration#kub-deployment.md-compute-and-scaling-configuration">Compute and Scaling Configuration</h2><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_59" alt="image_44.png" title="image_44.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_44.png" width="1006" height="631"><figcaption class="center-text">image_44.png</figcaption></figure></div><p id="-77286534#ag2tze_60">Here select the specification of the EC2 instances you want to use. Also select on the Node group scaling configuration (or go with the default): <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_63" alt="image_45.png" title="image_45.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_45.png" width="1045" height="784"><figcaption class="center-text">image_45.png</figcaption></figure></div></p><p id="-77286534#ag2tze_61">For the other pages use the default and create the Node group. Now you have everything set: <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_64" alt="image_46.png" title="image_46.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_46.png" width="1555" height="844"><figcaption class="center-text">image_46.png</figcaption></figure></div></p><p id="-77286534#ag2tze_62">Now let's create the configuration .</p></section><section><h2 id="-77286534#database-service" data-toc="database-service#kub-deployment.md-database-service">Database Service</h2><div class="detached code-block" id="-77286534#ag2tze_65"><pre><code class="language-dockerfile">apiVersion: v1
kind: Service
metadata:
  name: database-service
spec:
  selector:
    app: database
  type: ClusterIP
  ports:
    - protocol: TCP
      port: 1433
      targetPort: 1433</code></pre></div></section><section><h2 id="-77286534#database-deployment" data-toc="database-deployment#kub-deployment.md-database-deployment">Database Deployment</h2><div class="detached code-block" id="-77286534#ag2tze_66"><pre><code class="language-dockerfile">apiVersion: apps/v1
kind: Deployment
metadata:
   name: database-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: database
  template:
    metadata:
      labels:
        app: database      
    spec:
      containers:
        - name: database
          image: mcr.microsoft.com/mssql/server:2019-latest
          env:
            - name: MSSQL_SA_PASSWORD
              value: Root@2024
            - name: ACCEPT_EULA
              value: 'Y'</code></pre></div></section><section><h2 id="-77286534#fruit-backend-service" data-toc="fruit-backend-service#kub-deployment.md-fruit-backend-service">Fruit Backend Service</h2><div class="detached code-block" id="-77286534#ag2tze_67"><pre><code class="language-dockerfile">apiVersion: v1
kind: Service
metadata:
  name: fruit-service
spec:
  selector:
    app: fruit
  type: LoadBalancer
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80</code></pre></div></section><section><h2 id="-77286534#fruit-backend-deployment" data-toc="fruit-backend-deployment#kub-deployment.md-fruit-backend-deployment">Fruit  Backend Deployment</h2><div class="detached code-block" id="-77286534#ag2tze_68"><pre><code class="language-dockerfile">apiVersion: apps/v1
kind: Deployment
metadata:
   name: fruit-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: fruit
  template:
    metadata:
      labels:
        app: fruit
    spec:
      containers:
        - name: fruit
          image: ndambuki/kub-fruit:latest
          env:
            - name: DB_USER 
              value: 'sa'

            - name: DB_PWD
              value: 'Root@2024'

            - name: DB_NAME
              value: 'Fruits'</code></pre></div><p id="-77286534#ag2tze_69">Before we can apply the changes:</p><p id="-77286534#ag2tze_70">let's configure our .kube config.file (Copy the backup somewhere )</p><p id="-77286534#ag2tze_71">First configure your AWS: here (<a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html</a>)</p><p id="-77286534#ag2tze_72">Then Run this command:</p><div class="detached code-block" id="-77286534#ag2tze_73"><pre><code class="language-dockerfile">aws eks --region &lt;your region&gt; update-kubeconfig --name &lt;your cluster name&gt;</code></pre></div><p id="-77286534#ag2tze_74">E.g. My configuration</p><div class="detached code-block" id="-77286534#ag2tze_75"><pre><code class="language-dockerfile">aws eks --region us-east-1 update-kubeconfig --name fruits-cluster</code></pre></div><p id="-77286534#ag2tze_76">Now run the configuration:</p><div class="detached code-block" id="-77286534#ag2tze_77"><pre><code class="language-dockerfile">kubectl apply -f database-service.yaml -f database.yaml -f fruit-service.yaml  -f fruit.yaml</code></pre></div><p id="-77286534#ag2tze_78">Now everything should be working well:</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_79" alt="image_47.png" title="image_47.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_47.png" width="940" height="103"><figcaption class="center-text">image_47.png</figcaption></figure></div><p id="-77286534#ag2tze_80">Then the services <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_87" alt="image_48.png" title="image_48.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_48.png" width="1380" height="226"><figcaption class="center-text">image_48.png</figcaption></figure></div></p><p id="-77286534#ag2tze_81">The loadBalancer can now run in postman or the browser e.g.: <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_88" alt="image_49.png" title="image_49.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_49.png" width="1306" height="853"><figcaption class="center-text">image_49.png</figcaption></figure></div></p><p id="-77286534#ag2tze_82">You can also get the added fruits:</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_83" alt="image_50.png" title="image_50.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_50.png" width="1270" height="814"><figcaption class="center-text">image_50.png</figcaption></figure></div><blockquote class="prompt flex bordered-element-rounded tip detached">
  <svg xmlns="http://www.w3.org/2000/svg" class="prompt-icon">
    <path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path>
  </svg>
  <div class="prompt-content prompt-content-p"><p>On your frontend connect to the backend LoadBalancer then push the image</p></div>
</blockquote>
<section><h3 id="-77286534#frontend-service" data-toc="frontend-service#kub-deployment.md-frontend-service">Frontend Service</h3><div class="detached code-block" id="-77286534#ag2tze_89"><pre><code class="language-dockerfile">apiVersion: v1
kind: Service
metadata:
  name: frontend-service
spec:
  selector:
    app: frontend
  type: LoadBalancer
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80</code></pre></div></section></section><section><h2 id="-77286534#frontend-deployment" data-toc="frontend-deployment#kub-deployment.md-frontend-deployment">Frontend Deployment</h2><div class="detached code-block" id="-77286534#ag2tze_90"><pre><code class="language-dockerfile">apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend-deployment
spec:
  replicas: 1
  selector: 
    matchLabels:
      app: frontend
  template:
    metadata:
      labels:
        app: frontend
    spec:
      containers:
        - name: frontend
          image: ndambuki/kub-fruit-frontend:latest</code></pre></div><p id="-77286534#ag2tze_91">apply these Changes</p><div class="detached code-block" id="-77286534#ag2tze_92"><pre><code class="language-dockerfile">kubectl apply -f frontend.yaml -f  frontend-service.yaml</code></pre></div><p id="-77286534#ag2tze_93">And the Application is Live <div class="container"><figure class="image-container"><img class="center image image-size" id="-77286534#ag2tze_94" alt="image_51.png" title="image_51.png" src="C:/Users/JonathanNdambuki/WritersideProjects/Kubernetes-101/Writerside/images/image_51.png" width="925" height="460"><figcaption class="center-text">image_51.png</figcaption></figure></div></p></section></article></div></section></div></body></html>